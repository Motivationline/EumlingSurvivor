[gd_scene load_steps=24 format=3 uid="uid://dtxcbfvali8ib"]

[ext_resource type="PackedScene" uid="uid://54ektyxf0nc1" path="res://assets/characters/enemies/peacock/peacock.glb" id="1_06s3q"]
[ext_resource type="Script" uid="uid://fxqs1lioec3e" path="res://game/sound/sfx/manager/sound_effect_manager.gd" id="2_lbsk3"]
[ext_resource type="PackedScene" uid="uid://cpbr8uxxklmxm" path="res://game/sound/sfx/sound_presets/enemy_preset.tscn" id="3_b4n07"]
[ext_resource type="AudioStream" uid="uid://db05veivwt285" path="res://assets/characters/enemies/peacock/sounds/slash_1.wav" id="4_s57sc"]
[ext_resource type="AudioStream" uid="uid://pky3frkxp8hm" path="res://assets/characters/enemies/peacock/sounds/slash_2.wav" id="5_3f0b6"]
[ext_resource type="AudioStream" uid="uid://bqngr1fx2bqe" path="res://assets/characters/enemies/peacock/sounds/slash_3.wav" id="6_ktqvi"]
[ext_resource type="AudioStream" uid="uid://cmp20igs7cipi" path="res://assets/characters/enemies/peacock/sounds/slash_4.wav" id="7_sqecj"]
[ext_resource type="AudioStream" uid="uid://blt2iiuhvm43y" path="res://assets/characters/enemies/peacock/sounds/slash_5.wav" id="8_bcwtc"]
[ext_resource type="AudioStream" uid="uid://cfmhfuoheaa7h" path="res://assets/characters/enemies/peacock/sounds/slash_6.wav" id="9_mtje3"]
[ext_resource type="AudioStream" uid="uid://puwjegppa1uy" path="res://assets/characters/enemies/peacock/sounds/death_1.wav" id="10_lk2ep"]
[ext_resource type="AudioStream" uid="uid://iqb0mgbwd4nr" path="res://assets/characters/enemies/peacock/sounds/death_2.wav" id="11_rg3mh"]
[ext_resource type="AudioStream" uid="uid://do5e1gi02kabn" path="res://assets/characters/enemies/peacock/sounds/death_3.wav" id="12_lbxcw"]
[ext_resource type="AudioStream" uid="uid://br0b2pgf7ios5" path="res://assets/characters/enemies/peacock/sounds/death_4.wav" id="13_g63n1"]
[ext_resource type="AudioStream" uid="uid://cp1lcnj843xkh" path="res://assets/characters/enemies/peacock/sounds/death_5.wav" id="14_gg60l"]
[ext_resource type="AudioStream" uid="uid://4ggxibgyrynx" path="res://assets/characters/enemies/peacock/sounds/death_6.wav" id="15_ujyfj"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lk2ep"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rg3mh"]
animation = &"swipe"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lbxcw"]
animation = &"idle"

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_gg60l"]
input_0/name = "idle"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "walk"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_g63n1"]
fadein_time = 0.2
fadeout_time = 0.15

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ujyfj"]
graph_offset = Vector2(-541, 21)
nodes/output/position = Vector2(520, 140)
nodes/Animation/node = SubResource("AnimationNodeAnimation_lbxcw")
nodes/Animation/position = Vector2(-260, 80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_lk2ep")
"nodes/Animation 2/position" = Vector2(-260, 260)
nodes/Transition/node = SubResource("AnimationNodeTransition_gg60l")
nodes/Transition/position = Vector2(-40, 140)
nodes/shoot/node = SubResource("AnimationNodeOneShot_g63n1")
nodes/shoot/position = Vector2(300, 140)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_rg3mh")
"nodes/Animation 3/position" = Vector2(100, 360)
node_connections = [&"output", 0, &"shoot", &"Transition", 0, &"Animation", &"Transition", 1, &"Animation 2", &"shoot", 0, &"Transition", &"shoot", 1, &"Animation 3"]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_j0h5x"]
random_pitch = 1.2
random_volume_offset_db = 2.0
streams_count = 6
stream_0/stream = ExtResource("4_s57sc")
stream_1/stream = ExtResource("5_3f0b6")
stream_2/stream = ExtResource("6_ktqvi")
stream_3/stream = ExtResource("7_sqecj")
stream_4/stream = ExtResource("8_bcwtc")
stream_5/stream = ExtResource("9_mtje3")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_s57sc"]
streams_count = 6
stream_0/stream = ExtResource("10_lk2ep")
stream_1/stream = ExtResource("11_rg3mh")
stream_2/stream = ExtResource("12_lbxcw")
stream_3/stream = ExtResource("13_g63n1")
stream_4/stream = ExtResource("14_gg60l")
stream_5/stream = ExtResource("15_ujyfj")

[node name="peacock" instance=ExtResource("1_06s3q")]

[node name="Skeleton3D" parent="Armature" index="0"]
bones/1/position = Vector3(0.015290167, 0.2013364, -0.24598031)
bones/1/rotation = Quaternion(0.7919241, -0.118861035, 0.013314532, -0.59879124)
bones/2/position = Vector3(0.0013821659, 0.06633595, 0.29456562)
bones/2/rotation = Quaternion(0.6982556, -0.115739554, 0.030158833, -0.70578605)
bones/3/position = Vector3(-0.027010761, -0.19488569, 0.7396571)
bones/3/rotation = Quaternion(0.8621118, -0.47524178, -0.17562301, 0.008073344)
bones/4/position = Vector3(-0.15356237, -0.24624412, 0.7850884)
bones/4/rotation = Quaternion(-0.0081744855, -0.8444469, 0.06334967, 0.53181726)
bones/5/position = Vector3(-0.26246217, -0.15324277, 0.8151361)
bones/5/rotation = Quaternion(-0.56478333, 0.1236946, -0.2016335, -0.7906094)
bones/6/position = Vector3(-0.22131835, 0.17964388, 0.35848248)
bones/6/rotation = Quaternion(0.7002058, 2.8825193e-08, 3.2992588e-08, 0.71394116)
bones/7/position = Vector3(-0.22364904, 0.23847869, 0.35735315)
bones/7/rotation = Quaternion(-0.009712742, 5.2331914e-16, -7.136685e-17, 0.9999529)
bones/8/position = Vector3(-0.22131835, 0.25494623, 0.32076648)
bones/8/rotation = Quaternion(-0.009712742, 5.188351e-16, -4.8457465e-18, 0.9999529)
bones/9/position = Vector3(-0.22131835, 0.1154242, 0.43089122)
bones/9/rotation = Quaternion(-1.1351352e-07, 0.17137267, 0.98520625, -4.431972e-08)
bones/10/position = Vector3(-0.22131835, 0.061472714, 0.45034552)
bones/10/rotation = Quaternion(4.406722e-08, 0.13262635, 0.99116606, 6.396269e-09)
bones/11/position = Vector3(-0.22131835, 0.003008619, 0.4663794)
bones/11/rotation = Quaternion(2.2419458e-08, -0.09728236, 0.9952568, 1.5843507e-07)
bones/12/position = Vector3(-0.17656209, 0.19105494, 0.41708612)
bones/12/rotation = Quaternion(0.091583766, -0.11907528, -0.7429512, 0.6522706)
bones/13/position = Vector3(-0.13568972, 0.18586612, 0.42988563)
bones/13/rotation = Quaternion(-0.041078035, 0.05122057, -0.8537141, 0.5165861)
bones/14/position = Vector3(-0.26607457, 0.19105482, 0.41708612)
bones/14/rotation = Quaternion(0.09158392, 0.11907519, 0.742951, 0.65227103)
bones/15/position = Vector3(-0.306947, 0.18586603, 0.42988563)
bones/15/rotation = Quaternion(-0.041078005, -0.051220514, 0.8537141, 0.51658624)
bones/16/position = Vector3(-0.28831574, 0.19305192, 0.37226444)
bones/16/rotation = Quaternion(-0.0068679536, 0.0068679536, 0.70707345, 0.70707345)
bones/17/position = Vector3(-0.2868497, 0.19303414, 0.37142128)
bones/17/rotation = Quaternion(-0.006867959, 0.006867959, 0.70707345, 0.70707345)
bones/18/position = Vector3(-0.15432096, 0.1930517, 0.37226444)
bones/18/rotation = Quaternion(-0.0068679247, -0.0068679247, -0.70707345, 0.70707345)
bones/19/position = Vector3(-0.15578699, 0.19303402, 0.37142128)
bones/19/rotation = Quaternion(-0.00686796, -0.00686796, -0.70707345, 0.70707345)
bones/20/position = Vector3(-0.28578877, 0.19301239, 0.3703844)
bones/20/rotation = Quaternion(-0.006867954, 0.006867954, 0.70707345, 0.70707345)
bones/21/position = Vector3(-0.15684794, 0.19301216, 0.3703844)
bones/21/rotation = Quaternion(-0.0068679247, -0.0068679247, -0.70707345, 0.70707345)
bones/22/position = Vector3(0.068283334, -0.10931784, 0.8859371)
bones/22/rotation = Quaternion(0.29402176, -0.15838993, -0.4215931, 0.8430439)
bones/23/position = Vector3(0.12639308, -0.0315876, 0.45524293)
bones/23/rotation = Quaternion(0.17198858, 0.09717827, -0.64906025, 0.73464084)
bones/24/position = Vector3(0.09562254, -0.39475906, -0.10813624)
bones/24/rotation = Quaternion(-0.12407392, -0.22508079, 0.86712855, -0.4266526)
bones/25/position = Vector3(0.07829845, -0.31353223, 0.27686128)
bones/25/rotation = Quaternion(-0.015804302, -0.25652644, 0.9662995, -0.0144816)
bones/26/position = Vector3(-0.0044284817, 0.0033120662, 0.8236167)
bones/26/rotation = Quaternion(0.92050403, -0.072469264, -0.095149636, 0.3719772)
bones/27/position = Vector3(0.03444046, 0.34954464, 0.7349814)
bones/27/rotation = Quaternion(-0.11115177, -0.60615045, -0.78630567, -0.044164393)
bones/28/position = Vector3(-0.024691287, -0.15991697, 0.07921821)
bones/28/rotation = Quaternion(-0.2645342, -0.031457897, 0.115392976, -0.95693076)
bones/29/position = Vector3(-0.065188505, -0.5104621, -0.29510382)
bones/29/rotation = Quaternion(3.0037477e-09, 0.33388758, 0.94050646, -0.06298135)
bones/29/scale = Vector3(1.185727, 0.7112644, 1.185726)
bones/30/position = Vector3(-0.037493885, -0.6902569, -0.14828444)
bones/30/rotation = Quaternion(0.052523963, 0.43822807, 0.8971298, -0.018858872)
bones/30/scale = Vector3(1.000001, 0.99999875, 0.99999994)
bones/31/position = Vector3(0.13053098, -0.8953619, 0.1077714)
bones/31/rotation = Quaternion(-0.0013487035, 0.26636013, 0.96386856, 0.0028122854)
bones/31/scale = Vector3(1.0000008, 0.9999994, 1.0000004)
bones/32/position = Vector3(0.45311606, -1.1980095, 0.24870253)
bones/32/rotation = Quaternion(0.111987524, 0.16674079, 0.938252, 0.28167292)
bones/32/scale = Vector3(0.9999998, 1.0000012, 0.9999989)
bones/33/position = Vector3(0.8927149, -1.5478601, 0.23199987)
bones/33/rotation = Quaternion(0.6759596, 0.08141313, 0.6881748, 0.25073126)
bones/33/scale = Vector3(1.000001, 1.0000006, 1.000001)
bones/34/position = Vector3(1.4107958, -1.8893642, 0.040560722)
bones/34/rotation = Quaternion(0.8261733, -0.215602, 0.28272146, -0.4370608)
bones/34/scale = Vector3(1.0000045, 0.9999928, 1.000004)
bones/35/position = Vector3(-0.065188505, -0.51046216, -0.29510397)
bones/36/rotation = Quaternion(0.044534754, 0.9011332, 0.42894328, -0.04453476)
bones/36/scale = Vector3(1.1857262, 0.71126413, 1.185726)
bones/37/position = Vector3(0.027694598, -0.17221725, 0.100803316)
bones/37/rotation = Quaternion(1.9722934e-08, 0.99264544, 0.1210587, -7.49427e-08)
bones/38/position = Vector3(6.809265e-09, 0.3286696, 2.1757407e-07)
bones/38/rotation = Quaternion(5.1330375e-08, 0.7071068, 0.7071068, -2.4033671e-08)
bones/39/rotation = Quaternion(-0.013604523, 0.5109368, 0.83311504, -0.21137188)
bones/39/scale = Vector3(1.0000001, 0.9999985, 1.0000001)
bones/40/rotation = Quaternion(-0.2274273, 0.14263633, 0.16455244, 0.9491334)
bones/41/position = Vector3(6.641636e-09, 0.32867044, -1.17077654e-07)
bones/41/rotation = Quaternion(3.0908556e-08, 0.7071078, 0.70710576, 3.0908588e-08)
bones/41/scale = Vector3(1, 1.0000004, 1.0000004)
bones/42/rotation = Quaternion(-0.013604474, 0.5109362, 0.8331154, -0.21137173)
bones/42/scale = Vector3(1, 0.9999995, 1.0000004)
bones/43/rotation = Quaternion(-0.22742736, 0.14263631, 0.16455245, 0.94913346)
bones/44/position = Vector3(3.2977642e-08, 0.32866922, 3.3633177e-07)
bones/44/rotation = Quaternion(3.090868e-08, 0.7071059, 0.70710766, 3.0908648e-08)
bones/44/scale = Vector3(1, 0.99999994, 1.000001)
bones/45/rotation = Quaternion(-0.013604618, 0.51093864, 0.8331139, -0.2113713)
bones/45/scale = Vector3(0.999999, 1.0000011, 0.99999857)
bones/46/rotation = Quaternion(-0.22742525, 0.14263663, 0.16455206, 0.949134)
bones/47/position = Vector3(9.692576e-10, 0.32866958, -4.3850804e-07)
bones/47/rotation = Quaternion(3.0908577e-08, 0.7071069, 0.70710665, 3.0908637e-08)
bones/48/rotation = Quaternion(-0.013604742, 0.51093686, 0.833115, -0.21137168)
bones/48/scale = Vector3(1.0000001, 1.0000007, 1.0000002)
bones/49/rotation = Quaternion(-0.2274253, 0.14263663, 0.16455206, 0.949134)
bones/50/position = Vector3(-1.3782483e-08, 0.32866883, -8.514337e-08)
bones/50/scale = Vector3(1, 1.000001, 1.000001)
bones/51/rotation = Quaternion(-0.013604707, 0.51093704, 0.8331148, -0.21137163)
bones/51/scale = Vector3(1.0000037, 0.9999933, 1.0000029)
bones/52/rotation = Quaternion(-0.22742534, 0.14263664, 0.1645521, 0.9491339)
bones/53/position = Vector3(-2.0536797e-09, 0.32867005, 2.022212e-07)
bones/54/position = Vector3(0.027694598, -0.17221725, 0.1008032)
bones/54/rotation = Quaternion(1.9722961e-08, 0.99264544, 0.12105872, -7.494268e-08)
bones/55/rotation = Quaternion(-0.2274253, 0.14263669, 0.1645521, 0.9491339)
bones/57/position = Vector3(-0.22131835, 0.17964377, 0.35848248)
bones/57/rotation = Quaternion(-5.6437736e-24, 0.010428911, 0.99994564, -3.426938e-26)
bones/58/rotation = Quaternion(-3.0908623e-08, 0.7071068, 0.7071068, -3.0908623e-08)
bones/61/rotation = Quaternion(-1.9877962e-07, 0.812197, 0.58338326, 1.31911335e-08)
bones/64/rotation = Quaternion(-0.39133763, -0.6052319, -0.44704625, 0.52981013)
bones/66/rotation = Quaternion(-0.3913382, 0.60523134, 0.44704616, 0.52981067)
bones/68/rotation = Quaternion(0.5, -0.5, -0.5, -0.5000001)
bones/69/rotation = Quaternion(0.5, -0.5, -0.49999997, -0.5000001)
bones/70/rotation = Quaternion(0.5, 0.5, 0.49999994, -0.5)
bones/71/rotation = Quaternion(0.5, 0.49999994, 0.50000006, -0.5)
bones/73/rotation = Quaternion(0.5, 0.5, 0.49999994, -0.5)
bones/74/rotation = Quaternion(-1.6086628e-07, 0.8121969, 0.5833834, 3.3134555e-08)
bones/77/position = Vector3(2.3268563e-17, 0.054824375, 0.26107043)
bones/77/rotation = Quaternion(-0.11539315, -0.9569306, -0.26453498, 0.031458385)
bones/79/rotation = Quaternion(-0.6062442, 0.055387445, -0.5176503, 0.60119754)
bones/80/rotation = Quaternion(-0.90870225, 1.8026078e-08, 2.1354116e-07, 0.41744494)
bones/81/rotation = Quaternion(-0.5961371, 8.8359045e-08, 1.4518679e-07, -0.80288273)
bones/82/position = Vector3(0.084121384, 0.14181197, -0.0323115)
bones/82/rotation = Quaternion(-0.58918047, -0.25895944, -0.7630483, 0.05969751)
bones/83/rotation = Quaternion(3.293337e-07, -1.206385e-07, -0.3841477, 0.9232717)
bones/84/rotation = Quaternion(2.6617133e-07, -1.2965974e-07, -0.33519256, 0.94214964)
bones/86/rotation = Quaternion(0.92261106, 2.8356592e-08, -2.0713499e-07, -0.38573158)
bones/87/rotation = Quaternion(-2.7826081e-08, 0.9630483, -0.26932913, -1.875124e-07)
bones/88/position = Vector3(0.08412138, 0.14181198, -0.03231147)
bones/88/rotation = Quaternion(-0.5891805, -0.25895932, -0.7630483, 0.059696715)
bones/89/rotation = Quaternion(-1.4013781e-07, 2.4780524e-08, -0.1315616, 0.991308)
bones/90/position = Vector3(-0.084121406, 0.14181186, -0.03231152)
bones/90/rotation = Quaternion(-0.59244114, 0.24999204, 0.76579803, 0.008420628)
bones/91/rotation = Quaternion(5.142679e-07, 2.6999082e-08, 0.40522525, 0.9142169)
bones/92/rotation = Quaternion(3.4055063e-07, 6.723786e-08, 0.35671675, 0.9342126)
bones/94/position = Vector3(-0.084121406, 0.14181188, -0.03231149)
bones/94/rotation = Quaternion(-0.59244126, 0.24999191, 0.76579803, 0.00842068)
bones/95/rotation = Quaternion(3.2733473e-07, -4.616262e-08, 0.15426798, 0.98802906)
bones/100/position = Vector3(0.32852387, 0.3147388, 0.23616084)
bones/101/position = Vector3(-0.102450386, -0.10931775, 0.81016946)
bones/101/rotation = Quaternion(0.18572193, 0.1419928, 0.6017089, 0.7637355)
bones/102/position = Vector3(-0.13427317, -0.036969602, 0.33798224)
bones/102/rotation = Quaternion(0.044908583, -0.03420189, 0.753873, 0.65459067)
bones/103/position = Vector3(-0.17303967, -0.39352775, -0.22473)
bones/103/rotation = Quaternion(-0.019309815, -0.17574522, 0.9195696, 0.3509024)
bones/104/position = Vector3(-0.14882183, -0.31148666, 0.17292035)
bones/104/rotation = Quaternion(-0.09266911, -0.15057117, 0.9812747, -0.07642486)
bones/105/position = Vector3(-0.37209862, 0.3147388, 0.23616084)

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_ujyfj")
anim_player = NodePath("../AnimationPlayer")
parameters/Transition/current_state = "idle"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 0
parameters/shoot/active = false
parameters/shoot/internal_active = false
parameters/shoot/request = 0

[node name="SoundEffectManager" type="Node3D" parent="." index="3"]
script = ExtResource("2_lbsk3")
metadata/_custom_type_script = "uid://fxqs1lioec3e"

[node name="Slash" parent="SoundEffectManager" index="0" instance=ExtResource("3_b4n07")]
stream = SubResource("AudioStreamRandomizer_j0h5x")

[node name="Death" parent="SoundEffectManager" index="1" instance=ExtResource("3_b4n07")]
stream = SubResource("AudioStreamRandomizer_s57sc")
