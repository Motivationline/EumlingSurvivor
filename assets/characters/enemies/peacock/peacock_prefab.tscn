[gd_scene load_steps=27 format=3 uid="uid://dtxcbfvali8ib"]

[ext_resource type="PackedScene" uid="uid://54ektyxf0nc1" path="res://assets/characters/enemies/peacock/peacock.glb" id="1_06s3q"]
[ext_resource type="Script" uid="uid://fxqs1lioec3e" path="res://game/sound/sfx/manager/sound_effect_manager.gd" id="2_lbsk3"]
[ext_resource type="Material" uid="uid://c12l5plt31315" path="res://assets/characters/enemies/hurt_material.tres" id="2_rg3mh"]
[ext_resource type="PackedScene" uid="uid://cpbr8uxxklmxm" path="res://game/sound/sfx/sound_presets/enemy_preset.tscn" id="3_b4n07"]
[ext_resource type="AudioStream" uid="uid://db05veivwt285" path="res://assets/characters/enemies/peacock/sounds/slash_1.wav" id="4_s57sc"]
[ext_resource type="AudioStream" uid="uid://pky3frkxp8hm" path="res://assets/characters/enemies/peacock/sounds/slash_2.wav" id="5_3f0b6"]
[ext_resource type="AudioStream" uid="uid://bqngr1fx2bqe" path="res://assets/characters/enemies/peacock/sounds/slash_3.wav" id="6_ktqvi"]
[ext_resource type="AudioStream" uid="uid://cmp20igs7cipi" path="res://assets/characters/enemies/peacock/sounds/slash_4.wav" id="7_sqecj"]
[ext_resource type="AudioStream" uid="uid://blt2iiuhvm43y" path="res://assets/characters/enemies/peacock/sounds/slash_5.wav" id="8_bcwtc"]
[ext_resource type="AudioStream" uid="uid://cfmhfuoheaa7h" path="res://assets/characters/enemies/peacock/sounds/slash_6.wav" id="9_mtje3"]
[ext_resource type="AudioStream" uid="uid://puwjegppa1uy" path="res://assets/characters/enemies/peacock/sounds/death_1.wav" id="10_lk2ep"]
[ext_resource type="AudioStream" uid="uid://iqb0mgbwd4nr" path="res://assets/characters/enemies/peacock/sounds/death_2.wav" id="11_rg3mh"]
[ext_resource type="AudioStream" uid="uid://do5e1gi02kabn" path="res://assets/characters/enemies/peacock/sounds/death_3.wav" id="12_lbxcw"]
[ext_resource type="AudioStream" uid="uid://br0b2pgf7ios5" path="res://assets/characters/enemies/peacock/sounds/death_4.wav" id="13_g63n1"]
[ext_resource type="AudioStream" uid="uid://cp1lcnj843xkh" path="res://assets/characters/enemies/peacock/sounds/death_5.wav" id="14_gg60l"]
[ext_resource type="AudioStream" uid="uid://4ggxibgyrynx" path="res://assets/characters/enemies/peacock/sounds/death_6.wav" id="15_ujyfj"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lk2ep"]
animation = &"walk"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_rg3mh"]
animation = &"swipe"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_g63n1"]
animation = &"hurt"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_lbxcw"]
animation = &"idle"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_gg60l"]
fadeout_time = 0.2

[sub_resource type="AnimationNodeTransition" id="AnimationNodeTransition_gg60l"]
input_0/name = "idle"
input_0/auto_advance = false
input_0/break_loop_at_end = false
input_0/reset = true
input_1/name = "walk"
input_1/auto_advance = false
input_1/break_loop_at_end = false
input_1/reset = true

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_g63n1"]
fadein_time = 0.2
fadeout_time = 0.15

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_ujyfj"]
graph_offset = Vector2(-20, 62)
nodes/output/position = Vector2(980, 120)
nodes/Animation/node = SubResource("AnimationNodeAnimation_lbxcw")
nodes/Animation/position = Vector2(-260, 80)
"nodes/Animation 2/node" = SubResource("AnimationNodeAnimation_lk2ep")
"nodes/Animation 2/position" = Vector2(-260, 260)
nodes/Transition/node = SubResource("AnimationNodeTransition_gg60l")
nodes/Transition/position = Vector2(-40, 140)
nodes/shoot/node = SubResource("AnimationNodeOneShot_g63n1")
nodes/shoot/position = Vector2(300, 140)
"nodes/Animation 3/node" = SubResource("AnimationNodeAnimation_rg3mh")
"nodes/Animation 3/position" = Vector2(100, 360)
nodes/Hurt/node = SubResource("AnimationNodeOneShot_gg60l")
nodes/Hurt/position = Vector2(660, 120)
"nodes/Animation 4/node" = SubResource("AnimationNodeAnimation_g63n1")
"nodes/Animation 4/position" = Vector2(480, 460)
node_connections = [&"output", 0, &"Hurt", &"Transition", 0, &"Animation", &"Transition", 1, &"Animation 2", &"shoot", 0, &"Transition", &"shoot", 1, &"Animation 3", &"Hurt", 0, &"shoot", &"Hurt", 1, &"Animation 4"]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_j0h5x"]
random_pitch = 1.2
random_volume_offset_db = 2.0
streams_count = 6
stream_0/stream = ExtResource("4_s57sc")
stream_1/stream = ExtResource("5_3f0b6")
stream_2/stream = ExtResource("6_ktqvi")
stream_3/stream = ExtResource("7_sqecj")
stream_4/stream = ExtResource("8_bcwtc")
stream_5/stream = ExtResource("9_mtje3")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_s57sc"]
streams_count = 6
stream_0/stream = ExtResource("10_lk2ep")
stream_1/stream = ExtResource("11_rg3mh")
stream_2/stream = ExtResource("12_lbxcw")
stream_3/stream = ExtResource("13_g63n1")
stream_4/stream = ExtResource("14_gg60l")
stream_5/stream = ExtResource("15_ujyfj")

[node name="peacock" instance=ExtResource("1_06s3q")]

[node name="Skeleton3D" parent="Armature" index="0"]
bones/0/position = Vector3(0, 0.026341531, 0.038039602)
bones/0/rotation = Quaternion(-0.3964934, 4.0539713e-15, 4.0539725e-15, 0.9180376)
bones/1/position = Vector3(8.34908e-17, 0.12203404, -0.063571766)
bones/1/rotation = Quaternion(-0.26127434, -7.287546e-08, 1.9725674e-08, 0.9652647)
bones/2/position = Vector3(-2.0111934e-16, 0.23358707, -0.1287356)
bones/2/rotation = Quaternion(0.047213297, -0.0054597245, 0.024776282, 0.99856263)
bones/3/position = Vector3(-0.0032343245, 0.29780832, -0.12267459)
bones/3/rotation = Quaternion(-0.15347174, -0.010317538, 0.023177993, 0.98782736)
bones/4/position = Vector3(-0.0060057873, 0.3595902, -0.14243948)
bones/4/rotation = Quaternion(-0.6186968, -0.02038505, 0.015103748, 0.78522015)
bones/5/position = Vector3(-0.0060875285, 0.3584825, -0.20547137)
bones/5/rotation = Quaternion(0.001361121, 4.3711353e-08, 5.949554e-11, 0.9999991)
bones/6/position = Vector3(-0.0060875285, 0.35862565, -0.2649133)
bones/6/rotation = Quaternion(-0.7061437, 3.6319804e-16, -3.6319804e-16, 0.70806867)
bones/7/position = Vector3(-0.0060875285, 0.3225531, -0.2816184)
bones/7/rotation = Quaternion(-0.7061437, 4.1017115e-16, -3.1609734e-16, 0.70806867)
bones/8/position = Vector3(-0.0060875285, 0.42934635, -0.13958706)
bones/8/rotation = Quaternion(-6.967645e-08, 0.81140214, 0.5844883, -9.6726694e-08)
bones/9/position = Vector3(-0.0060875285, 0.44752482, -0.085207954)
bones/9/rotation = Quaternion(4.1725343e-09, 0.78787, 0.61584175, 5.0824905e-08)
bones/10/position = Vector3(-0.0060875323, 0.46217868, -0.026398689)
bones/10/rotation = Quaternion(-1.2053562e-07, 0.6263699, 0.779526, 1.3875162e-07)
bones/11/position = Vector3(0.038668655, 0.4173229, -0.21550158)
bones/11/rotation = Quaternion(-0.39061648, -0.6046221, -0.44786987, 0.5303427)
bones/12/position = Vector3(0.07954103, 0.42999372, -0.21001524)
bones/12/rotation = Quaternion(0.3905805, 0.560328, 0.64612997, -0.3405812)
bones/13/position = Vector3(-0.05084371, 0.4173229, -0.21550158)
bones/13/rotation = Quaternion(-0.39061648, 0.6046221, 0.44786987, 0.5303427)
bones/14/position = Vector3(-0.09171608, 0.42999372, -0.21001524)
bones/14/rotation = Quaternion(-0.3905805, 0.560328, 0.64612997, 0.3405812)
bones/15/position = Vector3(-0.07308492, 0.3725716, -0.21854886)
bones/15/rotation = Quaternion(0.49931896, -0.49931902, -0.5006801, -0.50068015)
bones/16/position = Vector3(-0.071618885, 0.37172842, -0.2185509)
bones/16/rotation = Quaternion(0.49931902, -0.49931902, -0.50068, -0.50068)
bones/17/position = Vector3(0.060909867, 0.3725716, -0.21854888)
bones/17/rotation = Quaternion(0.49931896, 0.49931902, 0.5006801, -0.50068015)
bones/18/position = Vector3(0.05944383, 0.37172842, -0.2185509)
bones/18/rotation = Quaternion(0.49931902, 0.49931902, 0.50068, -0.50068)
bones/19/position = Vector3(-0.07055794, 0.37069154, -0.2185534)
bones/19/rotation = Quaternion(0.49931896, -0.49931902, -0.5006801, -0.50068015)
bones/20/position = Vector3(0.058382884, 0.37069154, -0.2185534)
bones/20/rotation = Quaternion(0.49931896, 0.49931902, 0.5006801, -0.50068015)
bones/21/position = Vector3(0.08412139, 0.2281868, -0.16300146)
bones/21/rotation = Quaternion(-0.5843122, -0.44932917, -0.66888416, -0.096314825)
bones/22/position = Vector3(0.13383693, 0.15571146, -0.073462784)
bones/22/rotation = Quaternion(0.3668698, 0.63931537, 0.5805625, 0.34587532)
bones/23/position = Vector3(0.14529793, 0.16534191, 0.09570292)
bones/23/rotation = Quaternion(0.13135347, 0.7253026, 0.43104246, 0.520466)
bones/24/position = Vector3(0.118225455, 0.19626895, -0.0012086034)
bones/24/rotation = Quaternion(-0.19170518, 0.711735, 0.16681653, 0.65487)
bones/25/position = Vector3(0, 0.20060559, -0.17154373)
bones/25/rotation = Quaternion(0.9913455, 1.9562004e-08, -1.4772206e-07, -0.13127838)
bones/26/position = Vector3(1.9084076e-15, 0.114163294, -0.19484654)
bones/26/rotation = Quaternion(-4.5241784e-08, 0.14057074, 0.99007064, -6.423407e-09)
bones/27/position = Vector3(5.10925e-18, 0.1450439, 0.01144038)
bones/27/rotation = Quaternion(0.70710665, -1.1520231e-07, -1.152023e-07, 0.7071069)
bones/28/position = Vector3(-3.552714e-15, 0.17571148, 0.13655879)
bones/28/rotation = Quaternion(0.04453457, 0.9011328, 0.4289441, -0.044534512)
bones/28/scale = Vector3(1.185726, 0.7112647, 1.1857259)
bones/29/position = Vector3(0.027694607, 0.32253096, 0.31635344)
bones/29/rotation = Quaternion(0.0013081649, 0.9700495, 0.24290386, -0.00015949395)
bones/29/scale = Vector3(1.0000001, 0.9999996, 1)
bones/30/position = Vector3(0.02855331, 0.61234796, 0.47122407)
bones/30/rotation = Quaternion(0.0026137868, 0.9325757, 0.3609649, -0.00014951637)
bones/30/scale = Vector3(1, 0.9999998, 0.9999999)
bones/31/position = Vector3(0.030172888, 0.85537696, 0.6927271)
bones/31/rotation = Quaternion(0.003880635, 0.88077784, 0.47351387, -0.00013733562)
bones/31/scale = Vector3(0.9999998, 1, 0.9999997)
bones/32/position = Vector3(0.032437164, 1.0363196, 0.9670107)
bones/32/rotation = Quaternion(0.0050878315, 0.81545746, 0.5787948, -0.00012304241)
bones/32/scale = Vector3(1.0000001, 0.9999997, 1.0000001)
bones/33/position = Vector3(0.035168506, 1.1442558, 1.2773273)
bones/33/rotation = Quaternion(0.006216805, 0.73761666, 0.67519116, -0.00010685623)
bones/33/scale = Vector3(1, 0.9999997, 0.99999994)
bones/34/position = Vector3(-0.084121406, 0.2281868, -0.16300146)
bones/34/rotation = Quaternion(-0.5843122, 0.44932914, 0.6688842, -0.096314944)
bones/35/position = Vector3(-0.13383693, 0.15571144, -0.07346277)
bones/35/rotation = Quaternion(-0.36686978, 0.6393153, 0.5805625, -0.3458754)
bones/36/position = Vector3(-0.14529793, 0.1653419, 0.09570293)
bones/36/rotation = Quaternion(-0.13135347, 0.72530264, 0.43104243, -0.520466)
bones/37/position = Vector3(-0.118225425, 0.19626895, -0.0012086183)
bones/37/rotation = Quaternion(0.19170518, 0.711735, 0.16681647, -0.65487)

[node name="Peacock" parent="Armature/Skeleton3D" index="0"]
material_overlay = ExtResource("2_rg3mh")

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeBlendTree_ujyfj")
anim_player = NodePath("../AnimationPlayer")
parameters/Transition/current_state = "idle"
parameters/Transition/transition_request = ""
parameters/Transition/current_index = 0
parameters/shoot/active = false
parameters/shoot/internal_active = false
parameters/shoot/request = 0
parameters/Hurt/active = false
parameters/Hurt/internal_active = false
parameters/Hurt/request = 0

[node name="SoundEffectManager" type="Node3D" parent="." index="3"]
script = ExtResource("2_lbsk3")
metadata/_custom_type_script = "uid://fxqs1lioec3e"

[node name="Slash" parent="SoundEffectManager" index="0" instance=ExtResource("3_b4n07")]
stream = SubResource("AudioStreamRandomizer_j0h5x")

[node name="Death" parent="SoundEffectManager" index="1" instance=ExtResource("3_b4n07")]
stream = SubResource("AudioStreamRandomizer_s57sc")
