[gd_scene load_steps=25 format=3 uid="uid://cvbt5bpffucle"]

[ext_resource type="PackedScene" uid="uid://by41qcd1ukb23" path="res://assets/characters/enemies/bossbugger/BossBugger.glb" id="1_kivi1"]
[ext_resource type="Shader" uid="uid://5x2ftmf5e728" path="res://game/shared/lquid_shader/liquid_shader.gdshader" id="2_lvjto"]
[ext_resource type="Script" uid="uid://pxwowh6vn2b7" path="res://assets/characters/enemies/bossbugger/liquid_wobble.gd" id="3_vkxpk"]
[ext_resource type="Texture2D" uid="uid://dvtouo6w5iri0" path="res://assets/characters/enemies/bossbugger/wings.png" id="4_djlvw"]

[sub_resource type="Gradient" id="Gradient_vkxpk"]
colors = PackedColorArray(0.3272901, 0.11730001, 0.69, 1, 0.75333357, 0.26, 1, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_djlvw"]
gradient = SubResource("Gradient_vkxpk")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_url60"]
render_priority = 0
shader = ExtResource("2_lvjto")
shader_parameter/liquid_height = 0.0
shader_parameter/liquid_surface_color = Color(0.8693332, 0.44, 1, 1)
shader_parameter/liquid_rim_gradient = SubResource("GradientTexture1D_djlvw")
shader_parameter/rim_emission_intensity = 0.814000038665
shader_parameter/rim_exponent = 3.0
shader_parameter/emission_intensity = 0.1
shader_parameter/liquid_surface_gradient_size = 0.1
shader_parameter/wobble = Vector2(0, 0)

[sub_resource type="SphereMesh" id="SphereMesh_vkxpk"]
radius = 0.6

[sub_resource type="AtlasTexture" id="AtlasTexture_url60"]
atlas = ExtResource("4_djlvw")
region = Rect2(0, 0, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_tuq3u"]
atlas = ExtResource("4_djlvw")
region = Rect2(128, 0, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_r72m3"]
atlas = ExtResource("4_djlvw")
region = Rect2(256, 0, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ir37v"]
atlas = ExtResource("4_djlvw")
region = Rect2(0, 64, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_w4i13"]
atlas = ExtResource("4_djlvw")
region = Rect2(128, 64, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gch53"]
atlas = ExtResource("4_djlvw")
region = Rect2(256, 64, 128, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_dfjp2"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_url60")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tuq3u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r72m3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ir37v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w4i13")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gch53")
}],
"loop": true,
"name": &"wings",
"speed": 30.0
}]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_vkxpk"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_djlvw"]
animation = &"refill"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_url60"]
animation = &"shoot"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_djlvw"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_url60"]
xfade_time = 0.15
advance_mode = 2
advance_condition = &"REFILL"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_tuq3u"]
xfade_time = 0.5
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_r72m3"]
xfade_time = 0.1
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_ir37v"]
xfade_time = 0.1
advance_mode = 2
advance_condition = &"shoot"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_url60"]
states/Start/position = Vector2(212, 100)
states/idle/node = SubResource("AnimationNodeAnimation_vkxpk")
states/idle/position = Vector2(407, 101)
states/refill/node = SubResource("AnimationNodeAnimation_djlvw")
states/refill/position = Vector2(407, 242)
states/shoot/node = SubResource("AnimationNodeAnimation_url60")
states/shoot/position = Vector2(551, 21)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_djlvw"), "idle", "refill", SubResource("AnimationNodeStateMachineTransition_url60"), "refill", "idle", SubResource("AnimationNodeStateMachineTransition_tuq3u"), "shoot", "idle", SubResource("AnimationNodeStateMachineTransition_r72m3"), "idle", "shoot", SubResource("AnimationNodeStateMachineTransition_ir37v")]
graph_offset = Vector2(-43, -39)

[node name="BossBugger" instance=ExtResource("1_kivi1")]

[node name="Skeleton3D" parent="Armature_001" index="0"]
bones/0/position = Vector3(1.5046328e-36, 1.3586645, -3.9769707e-22)
bones/0/rotation = Quaternion(0.9986353, -2.386543e-09, -4.563323e-08, -0.052226912)
bones/1/rotation = Quaternion(1, 2.220446e-16, -7.54979e-08, -2.0866981e-22)
bones/1/scale = Vector3(1, 0.9999999, 1)
bones/4/rotation = Quaternion(0.122083224, 4.5353765e-08, -5.5786633e-09, 0.9925199)
bones/5/rotation = Quaternion(-0.37183794, 3.552285e-09, 1.3108518e-08, 0.9282977)
bones/6/rotation = Quaternion(-0.07468212, 2.3803857e-09, 1.7826006e-10, 0.99720746)
bones/6/scale = Vector3(0.9070117, 1.215554, 0.9070114)
bones/7/rotation = Quaternion(-0.07766311, -6.499149e-15, 2.1480608e-14, 0.99697965)
bones/7/scale = Vector3(1.3401754, 1.0087919, 1.3335701)
bones/8/rotation = Quaternion(-0.07468203, 2.4493309e-15, -1.7590652e-14, 0.99720746)
bones/8/scale = Vector3(0.99999994, 0.99999994, 1)
bones/9/rotation = Quaternion(-0.29905906, -4.4502713e-15, -1.5590494e-14, 0.9542347)
bones/9/scale = Vector3(1.0000001, 0.99999994, 1)
bones/10/rotation = Quaternion(-0.29905948, -5.148352e-15, -1.9895332e-14, 0.9542345)
bones/10/scale = Vector3(1.0000002, 0.9999996, 1.0000002)
bones/11/rotation = Quaternion(-0.2990591, -9.191412e-15, -3.2577158e-14, 0.9542346)
bones/11/scale = Vector3(1, 0.99999946, 1.0000002)
bones/12/rotation = Quaternion(-0.2990594, -1.8615516e-14, 7.130134e-08, 0.9542345)
bones/12/scale = Vector3(0.99999994, 1, 1)
bones/13/rotation = Quaternion(-0.4374547, 9.383135e-15, -1.0974611e-08, 0.89924043)
bones/13/scale = Vector3(0.99999964, 1.0000006, 0.9999998)
bones/14/rotation = Quaternion(-0.4374554, -6.6332535e-09, -1.4201278e-08, 0.89924014)
bones/14/scale = Vector3(1, 1, 0.99999946)
bones/15/rotation = Quaternion(-0.43745503, -6.6331403e-09, -1.42014445e-08, 0.89924026)
bones/15/scale = Vector3(1.0000002, 0.9999996, 1.0000001)
bones/16/rotation = Quaternion(-0.43745545, -6.6332166e-09, -1.4201356e-08, 0.8992401)
bones/16/scale = Vector3(0.9999999, 1.0000002, 1.0000002)
bones/17/rotation = Quaternion(0.67997015, -0.0005975883, 0.0006833131, 0.7332393)
bones/18/rotation = Quaternion(0.7046544, 0.18760748, 0.21343122, 0.6501637)
bones/19/rotation = Quaternion(-0.4548464, 0.49087575, -0.545053, -0.5050475)
bones/22/rotation = Quaternion(-0.34551916, 0.5731151, -0.6363689, -0.38365394)
bones/25/rotation = Quaternion(0.67997015, 0.00059764844, -0.0006833818, 0.7332393)
bones/26/rotation = Quaternion(0.70691484, -0.16704233, -0.1922642, 0.65985066)
bones/27/rotation = Quaternion(0.22668909, -0.66213804, 0.3153517, 0.6408889)
bones/28/rotation = Quaternion(-1.8217108e-07, 0.05361173, -0.053510725, 0.9971271)
bones/31/rotation = Quaternion(0.45484632, 0.4908758, -0.54505306, 0.50504744)
bones/34/rotation = Quaternion(0.3455191, 0.5731151, -0.636369, 0.38365382)

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Armature_001/Skeleton3D" index="0"]
transform = Transform3D(1, 9.533134e-09, 2.3792e-07, 1.5336605e-08, 0.99454445, -0.104311265, -2.3761646e-07, 0.10431124, 0.9945446, -2.5872153e-11, 1.3559654, -0.00028309226)
bone_name = "DEF_FLUID"
bone_idx = 2

[node name="MeshInstance3D" type="MeshInstance3D" parent="Armature_001/Skeleton3D/BoneAttachment3D" index="0"]
transform = Transform3D(1, -6.208427e-08, 8.1328295e-09, 6.183289e-08, 0.95868754, -0.28446186, 9.863726e-09, 0.28446168, 0.95868754, 7.614165e-09, 0.5802684, -0.009195534)
material_override = SubResource("ShaderMaterial_url60")
mesh = SubResource("SphereMesh_vkxpk")
script = ExtResource("3_vkxpk")
liquid_height = 0.0

[node name="backwings" parent="Armature_001/Skeleton3D" index="1"]
visible = false

[node name="frontwings" parent="Armature_001/Skeleton3D" index="14"]
visible = false

[node name="HullInside" parent="Armature_001/Skeleton3D" index="15"]
visible = false

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="Armature_001/Skeleton3D" index="16"]
transform = Transform3D(-0.07608364, -0.99710155, -3.2782555e-07, -2.3841858e-07, -2.5238842e-07, 0.99999994, -0.9971014, 0.07608364, -1.937151e-07, -0.24529767, 1.3588289, -0.0015692324)
bone_name = "DEF_FRONTWING.L"
bone_idx = 19

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Armature_001/Skeleton3D/BoneAttachment3D2" index="0"]
transform = Transform3D(0.1124437, -0.86069745, 0.49654457, 0.99343705, 0.10792635, -0.037889056, -0.020979252, 0.4975459, 0.8671841, 0.062692575, 0.8214551, 0.17844987)
sprite_frames = SubResource("SpriteFrames_dfjp2")
animation = &"wings"
autoplay = "wings"
frame_progress = 0.9013848

[node name="BoneAttachment3D3" type="BoneAttachment3D" parent="Armature_001/Skeleton3D" index="17"]
transform = Transform3D(-0.4668525, -0.8843352, -4.7683713e-07, -2.0861626e-07, -3.837049e-07, 0.99999994, -0.8843351, 0.46685246, 5.2154064e-08, -0.13967305, 1.2642395, 0.10987665)
bone_name = "DEF_BACKWING.L"
bone_idx = 22

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Armature_001/Skeleton3D/BoneAttachment3D3" index="0"]
transform = Transform3D(0.112443715, -0.86069757, 0.4965446, 0.9934372, 0.1079264, -0.03788905, -0.020979252, 0.4975459, 0.86718404, 0.085815355, 0.9607185, 0.17260218)
sprite_frames = SubResource("SpriteFrames_dfjp2")
animation = &"wings"
autoplay = "wings"
frame_progress = 0.6899948

[node name="BoneAttachment3D4" type="BoneAttachment3D" parent="Armature_001/Skeleton3D" index="18"]
transform = Transform3D(-0.0760837, 0.99710166, 3.5762793e-07, 2.682209e-07, -3.9860606e-07, 1, 0.9971015, 0.07608372, -2.6077032e-07, 0.24529767, 1.3588289, -0.0015692327)
bone_name = "DEF_FRONTWING.R"
bone_idx = 31

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Armature_001/Skeleton3D/BoneAttachment3D4" index="0"]
transform = Transform3D(-0.17642894, 0.91023165, 0.37463757, 0.9834348, 0.14691877, 0.10617274, 0.041600414, 0.38716334, -0.92107224, -0.10956442, 0.7491533, 0.208817)
sprite_frames = SubResource("SpriteFrames_dfjp2")
animation = &"wings"
autoplay = "wings"
frame_progress = 0.49935126

[node name="BoneAttachment3D5" type="BoneAttachment3D" parent="Armature_001/Skeleton3D" index="19"]
transform = Transform3D(-0.46685255, 0.8843353, 3.2782552e-07, 2.30968e-07, -1.6763806e-07, 0.9999999, 0.88433504, 0.46685264, -6.7055225e-08, 0.13967305, 1.2642395, 0.109876655)
bone_name = "DEF_BACKWING.R"
bone_idx = 34

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Armature_001/Skeleton3D/BoneAttachment3D5" index="0"]
transform = Transform3D(0.02324143, 0.9017, 0.43173987, 0.99260414, 0.030659795, -0.11746749, -0.11915756, 0.43127665, -0.89431685, 0.032096498, 0.8236661, 0.119693875)
sprite_frames = SubResource("SpriteFrames_dfjp2")
animation = &"wings"
autoplay = "wings"
frame_progress = 0.5995038

[node name="AnimationTree" type="AnimationTree" parent="." index="2"]
tree_root = SubResource("AnimationNodeStateMachine_url60")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/REFILL = false
parameters/conditions/idle = false
parameters/conditions/shoot = false
