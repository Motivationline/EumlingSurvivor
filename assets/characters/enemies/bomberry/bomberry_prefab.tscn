[gd_scene format=3 uid="uid://b8ns3hl23ic6v"]

[ext_resource type="PackedScene" uid="uid://ca8qbynsv4h1r" path="res://assets/characters/enemies/bomberry/bomberry.glb" id="1_1vqqe"]
[ext_resource type="Script" uid="uid://fxqs1lioec3e" path="res://game/sound/sfx/manager/sound_effect_manager.gd" id="2_jh4a6"]
[ext_resource type="PackedScene" uid="uid://cpbr8uxxklmxm" path="res://game/sound/sfx/sound_presets/enemy_preset.tscn" id="3_4ahpr"]
[ext_resource type="AudioStream" uid="uid://gux8h75ckcwo" path="res://assets/characters/enemies/bomberry/sounds/charge_1.wav" id="4_13fr6"]
[ext_resource type="AudioStream" uid="uid://drhtpeylcv5lm" path="res://assets/characters/enemies/bomberry/sounds/charge_2.wav" id="5_nx8uu"]
[ext_resource type="AudioStream" uid="uid://bulot3ony1hxf" path="res://assets/characters/enemies/bomberry/sounds/charge_3.wav" id="6_gfeba"]
[ext_resource type="AudioStream" uid="uid://bvb8ynp4xwto0" path="res://assets/characters/enemies/bomberry/sounds/charge_4.wav" id="7_sc727"]
[ext_resource type="AudioStream" uid="uid://bher35ljx425f" path="res://assets/characters/enemies/bomberry/sounds/charge_5.wav" id="8_snc2r"]
[ext_resource type="AudioStream" uid="uid://ckrptc0lh1gq4" path="res://assets/characters/enemies/bomberry/sounds/charge_6.wav" id="9_4yawg"]
[ext_resource type="Material" uid="uid://cnoq1hlmtsi46" path="res://game/shared/flash/flash_material.tres" id="10_jh4a6"]
[ext_resource type="PackedScene" uid="uid://ci076xieq67c" path="res://game/shared/shadow/decal_shadow.tscn" id="11_wdta4"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_jh4a6"]
animation = &"run"

[sub_resource type="AnimationNodeOneShot" id="AnimationNodeOneShot_wdta4"]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_hadyb"]
animation = &"explode"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_meilw"]
advance_mode = 2

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_gtnhn"]
states/Start/position = Vector2(251, 122)
states/explode/node = SubResource("AnimationNodeAnimation_hadyb")
states/explode/position = Vector2(528, 122)
transitions = ["Start", "explode", SubResource("AnimationNodeStateMachineTransition_meilw")]
graph_offset = Vector2(-57, -35)

[sub_resource type="AnimationNodeBlendTree" id="AnimationNodeBlendTree_13fr6"]
graph_offset = Vector2(-422.15466, 12.07431)
nodes/output/position = Vector2(480, 140)
nodes/Animation/node = SubResource("AnimationNodeAnimation_jh4a6")
nodes/Animation/position = Vector2(-60, 100)
nodes/Explode/node = SubResource("AnimationNodeOneShot_wdta4")
nodes/Explode/position = Vector2(200, 140)
nodes/StateMachine/node = SubResource("AnimationNodeStateMachine_gtnhn")
nodes/StateMachine/position = Vector2(-120, 360)
node_connections = [&"output", 0, &"Explode", &"Explode", 0, &"Animation", &"Explode", 1, &"StateMachine"]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_uhlw0"]
streams_count = 6
stream_0/stream = ExtResource("4_13fr6")
stream_1/stream = ExtResource("5_nx8uu")
stream_2/stream = ExtResource("6_gfeba")
stream_3/stream = ExtResource("7_sc727")
stream_4/stream = ExtResource("8_snc2r")
stream_5/stream = ExtResource("9_4yawg")

[sub_resource type="Animation" id="Animation_wdta4"]
resource_name = "Flash"
loop_mode = 1
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Armature/Skeleton3D/bomberry_object:material_overlay")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0, 1),
"transitions": PackedFloat32Array(1, 1),
"update": 1,
"values": [ExtResource("10_jh4a6"), ExtResource("10_jh4a6")]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Armature/Skeleton3D/bomberry_object:instance_shader_parameters/flash_amount")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0, 0.1, 0.36666667),
"transitions": PackedFloat32Array(1, 1, 1),
"update": 0,
"values": [0.0, 0.90000004275, 0.0]
}

[sub_resource type="Animation" id="Animation_hadyb"]
length = 0.001
tracks/0/type = "value"
tracks/0/imported = false
tracks/0/enabled = true
tracks/0/path = NodePath("Armature/Skeleton3D/bomberry_object:material_overlay")
tracks/0/interp = 1
tracks/0/loop_wrap = true
tracks/0/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 1,
"values": [null]
}
tracks/1/type = "value"
tracks/1/imported = false
tracks/1/enabled = true
tracks/1/path = NodePath("Armature/Skeleton3D/bomberry_object:instance_shader_parameters/flash_amount")
tracks/1/interp = 1
tracks/1/loop_wrap = true
tracks/1/keys = {
"times": PackedFloat32Array(0),
"transitions": PackedFloat32Array(1),
"update": 0,
"values": [0.0]
}

[sub_resource type="AnimationLibrary" id="AnimationLibrary_meilw"]
_data = {
&"Flash": SubResource("Animation_wdta4"),
&"RESET": SubResource("Animation_hadyb")
}

[node name="bomberry" unique_id=642251939 instance=ExtResource("1_1vqqe")]

[node name="Skeleton3D" parent="Armature" index="0"]
bones/1/position = Vector3(0.007957827, -0.045090288, 0.16348179)
bones/1/rotation = Quaternion(0.06867112, 0.8515151, 0.48847073, 0.17777145)
bones/1/scale = Vector3(0.97842705, 1.0447087, 0.9784272)
bones/2/rotation = Quaternion(-0.9089333, 0.10815127, 0.11250111, 0.38663548)
bones/2/scale = Vector3(0.99913466, 0.97015595, 1.0342538)
bones/4/position = Vector3(0.007200726, 0.06304074, -0.165358)
bones/4/rotation = Quaternion(0.60655344, 0.36344582, 0.60655355, -0.3634459)
bones/6/rotation = Quaternion(-0.93906, 0.10913146, 0.113975234, 0.30539548)
bones/6/scale = Vector3(0.99871284, 0.9596924, 1.0458235)
bones/8/position = Vector3(-0.0014445579, 0.06304073, -0.16535802)
bones/8/rotation = Quaternion(0.6065535, -0.36344594, -0.60655344, -0.36344585)
bones/10/position = Vector3(-0.07754073, -0.03100948, 0.07872029)
bones/10/rotation = Quaternion(-7.1054274e-15, 0.1864579, 0.982463, 1.7763568e-15)
bones/12/position = Vector3(0.07754073, 0.2143444, 0.1398486)
bones/12/rotation = Quaternion(-7.105428e-15, -0.4321708, 0.9017919, 3.552714e-15)
bones/21/position = Vector3(-4.6976585e-19, 0.027797239, 0.28509694)
bones/21/rotation = Quaternion(-0.077145554, 0.25671113, 0.94751304, 0.1742613)
bones/22/position = Vector3(4.2489443e-09, -7.4458777e-09, 0.17137858)
bones/23/position = Vector3(1.8626451e-09, -2.3283064e-09, -0.1422766)
bones/24/rotation = Quaternion(0.7071068, 5.0728552e-08, 5.072855e-08, 0.7071068)
bones/24/scale = Vector3(0.97842705, 1.0447088, 0.9784271)
bones/25/rotation = Quaternion(-0.9089333, 0.10815127, 0.11250111, 0.38663548)
bones/25/scale = Vector3(0.99913466, 0.97015595, 1.0342538)
bones/27/position = Vector3(0.0072007286, 0.063040726, -0.165358)
bones/29/rotation = Quaternion(-0.93906, 0.10913146, 0.113975234, 0.30539548)
bones/29/scale = Vector3(0.99871284, 0.9596924, 1.0458235)
bones/31/position = Vector3(-0.0014445502, 0.06304072, -0.16535799)
bones/31/rotation = Quaternion(0.60655355, -0.36344594, -0.60655344, -0.3634459)

[node name="bomberry_object" parent="Armature/Skeleton3D" index="0"]
layers = 2

[node name="AnimationTree" type="AnimationTree" parent="." index="2" unique_id=1848731534]
tree_root = SubResource("AnimationNodeBlendTree_13fr6")
anim_player = NodePath("../AnimationPlayer")
parameters/Explode/active = false
parameters/Explode/internal_active = false
parameters/Explode/request = 0

[node name="SoundEffectManager" type="Node3D" parent="." index="3" unique_id=1702995857]
script = ExtResource("2_jh4a6")
metadata/_custom_type_script = "uid://fxqs1lioec3e"

[node name="Charge" parent="SoundEffectManager" index="0" unique_id=1565284737 instance=ExtResource("3_4ahpr")]
stream = SubResource("AudioStreamRandomizer_uhlw0")
volume_db = -5.0

[node name="AnimationPlayerFlash" type="AnimationPlayer" parent="." index="4" unique_id=294874640]
unique_name_in_owner = true
libraries/ = SubResource("AnimationLibrary_meilw")

[node name="DecalShadow" parent="." index="5" unique_id=1002455412 instance=ExtResource("11_wdta4")]
size = Vector3(0.4, 0.05, 0.4)
