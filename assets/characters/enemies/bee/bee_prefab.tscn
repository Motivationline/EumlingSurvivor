[gd_scene load_steps=42 format=3 uid="uid://he057bxgogh1"]

[ext_resource type="PackedScene" uid="uid://n1si44f13bg7" path="res://assets/characters/enemies/bee/Bee.glb" id="1_evdv5"]
[ext_resource type="Texture2D" uid="uid://dvtouo6w5iri0" path="res://assets/characters/enemies/bossbugger/wings.png" id="2_y6td5"]
[ext_resource type="Script" uid="uid://fxqs1lioec3e" path="res://game/sound/sfx/manager/sound_effect_manager.gd" id="3_vgdol"]
[ext_resource type="PackedScene" uid="uid://cpbr8uxxklmxm" path="res://game/sound/sfx/sound_presets/enemy_preset.tscn" id="4_l08uq"]
[ext_resource type="AudioStream" uid="uid://dh4qwocaanuim" path="res://assets/characters/enemies/bee/sounds/artillery_1.wav" id="5_e1p72"]
[ext_resource type="AudioStream" uid="uid://bub6e6jvotny1" path="res://assets/characters/enemies/bee/sounds/death_1.wav" id="5_k7ve1"]
[ext_resource type="AudioStream" uid="uid://doceuc1kxkmny" path="res://assets/characters/enemies/bee/sounds/artillery_2.wav" id="6_62wqs"]
[ext_resource type="AudioStream" uid="uid://4p0218581wdm" path="res://assets/characters/enemies/bee/sounds/death_2.wav" id="6_qyc4x"]
[ext_resource type="AudioStream" uid="uid://cn2yk4uixl58n" path="res://assets/characters/enemies/bee/sounds/death_3.wav" id="7_ahiif"]
[ext_resource type="AudioStream" uid="uid://bptm7e71hw3l" path="res://assets/characters/enemies/bee/sounds/artillery_3.wav" id="7_koxlt"]
[ext_resource type="AudioStream" uid="uid://rt1nsxajmip6" path="res://assets/characters/enemies/bee/sounds/death_4.wav" id="8_ecrfi"]
[ext_resource type="AudioStream" uid="uid://kgjcbd5ddmt8" path="res://assets/characters/enemies/bee/sounds/artillery_4.wav" id="8_k6bgc"]
[ext_resource type="AudioStream" uid="uid://cuxawp0gxp1ho" path="res://assets/characters/enemies/bee/sounds/death_5.wav" id="9_u5bf7"]
[ext_resource type="AudioStream" uid="uid://ly8jvm7hblrf" path="res://assets/characters/enemies/bee/sounds/artillery_5.wav" id="9_wcpm3"]
[ext_resource type="AudioStream" uid="uid://dlgliyv5f66a0" path="res://assets/characters/enemies/bee/sounds/death_6.wav" id="10_ig3bi"]
[ext_resource type="AudioStream" uid="uid://c3gw0mxnrcmyu" path="res://assets/characters/enemies/bee/sounds/artillery_6.wav" id="10_u3nb6"]
[ext_resource type="AudioStream" uid="uid://d7onyqdld4om" path="res://assets/characters/enemies/bee/sounds/shoot_1.wav" id="11_vgdol"]
[ext_resource type="AudioStream" uid="uid://b1d72dp5wbrn" path="res://assets/characters/enemies/bee/sounds/shoot_2.wav" id="12_ctotf"]
[ext_resource type="AudioStream" uid="uid://fl5he0cqgb20" path="res://assets/characters/enemies/bee/sounds/shoot_3.wav" id="13_bf2fh"]
[ext_resource type="AudioStream" uid="uid://dlhjkpo4ob7i8" path="res://assets/characters/enemies/bee/sounds/shoot_4.wav" id="14_630vq"]
[ext_resource type="AudioStream" uid="uid://powmcmm1vr0g" path="res://assets/characters/enemies/bee/sounds/shoot_5.wav" id="15_ogfog"]
[ext_resource type="AudioStream" uid="uid://tnd5cg217sns" path="res://assets/characters/enemies/bee/sounds/shoot_6.wav" id="16_udl5p"]

[sub_resource type="AtlasTexture" id="AtlasTexture_url60"]
atlas = ExtResource("2_y6td5")
region = Rect2(0, 0, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_tuq3u"]
atlas = ExtResource("2_y6td5")
region = Rect2(128, 0, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_r72m3"]
atlas = ExtResource("2_y6td5")
region = Rect2(256, 0, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_ir37v"]
atlas = ExtResource("2_y6td5")
region = Rect2(0, 64, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_w4i13"]
atlas = ExtResource("2_y6td5")
region = Rect2(128, 64, 128, 64)

[sub_resource type="AtlasTexture" id="AtlasTexture_gch53"]
atlas = ExtResource("2_y6td5")
region = Rect2(256, 64, 128, 64)

[sub_resource type="SpriteFrames" id="SpriteFrames_1pdba"]
animations = [{
"frames": [{
"duration": 1.0,
"texture": SubResource("AtlasTexture_url60")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_tuq3u")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_r72m3")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_ir37v")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_w4i13")
}, {
"duration": 1.0,
"texture": SubResource("AtlasTexture_gch53")
}],
"loop": true,
"name": &"wings",
"speed": 30.0
}]

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_snc18"]
animation = &"artillery"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_y6td5"]
animation = &"idle"

[sub_resource type="AnimationNodeAnimation" id="AnimationNodeAnimation_1pdba"]
animation = &"shoot"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_snc18"]
advance_mode = 2
advance_condition = &"idle"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_l08uq"]
xfade_time = 0.05
advance_mode = 2
advance_condition = &"attack"

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_27umu"]
xfade_time = 0.2
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_lj2ph"]
xfade_time = 0.1
switch_mode = 2
advance_mode = 2

[sub_resource type="AnimationNodeStateMachineTransition" id="AnimationNodeStateMachineTransition_8mxek"]
xfade_time = 0.1
advance_mode = 2
advance_condition = &"artillery"

[sub_resource type="AnimationNodeStateMachine" id="AnimationNodeStateMachine_snc18"]
states/artillery/node = SubResource("AnimationNodeAnimation_snc18")
states/artillery/position = Vector2(539, 79)
states/idle/node = SubResource("AnimationNodeAnimation_y6td5")
states/idle/position = Vector2(367, 79)
states/shoot/node = SubResource("AnimationNodeAnimation_1pdba")
states/shoot/position = Vector2(381, 165)
transitions = ["Start", "idle", SubResource("AnimationNodeStateMachineTransition_snc18"), "idle", "shoot", SubResource("AnimationNodeStateMachineTransition_l08uq"), "shoot", "idle", SubResource("AnimationNodeStateMachineTransition_27umu"), "artillery", "idle", SubResource("AnimationNodeStateMachineTransition_lj2ph"), "idle", "artillery", SubResource("AnimationNodeStateMachineTransition_8mxek")]

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_vgdol"]
streams_count = 6
stream_0/stream = ExtResource("5_k7ve1")
stream_1/stream = ExtResource("6_qyc4x")
stream_2/stream = ExtResource("7_ahiif")
stream_3/stream = ExtResource("8_ecrfi")
stream_4/stream = ExtResource("9_u5bf7")
stream_5/stream = ExtResource("10_ig3bi")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_snc18"]
random_pitch = 1.1
random_volume_offset_db = 2.0
streams_count = 6
stream_0/stream = ExtResource("5_e1p72")
stream_1/stream = ExtResource("6_62wqs")
stream_2/stream = ExtResource("7_koxlt")
stream_3/stream = ExtResource("8_k6bgc")
stream_4/stream = ExtResource("9_wcpm3")
stream_5/stream = ExtResource("10_u3nb6")

[sub_resource type="AudioStreamRandomizer" id="AudioStreamRandomizer_k7ve1"]
random_pitch = 1.1
random_volume_offset_db = 2.0
streams_count = 6
stream_0/stream = ExtResource("11_vgdol")
stream_1/stream = ExtResource("12_ctotf")
stream_2/stream = ExtResource("13_bf2fh")
stream_3/stream = ExtResource("14_630vq")
stream_4/stream = ExtResource("15_ogfog")
stream_5/stream = ExtResource("16_udl5p")

[node name="Bee" instance=ExtResource("1_evdv5")]

[node name="BoneAttachment3D" type="BoneAttachment3D" parent="Skeleton3D" index="26"]
transform = Transform3D(-0.9061586, 0.41458833, -0.083622105, 2.0861626e-07, 0.19771798, 0.9802589, 0.42293745, 0.88826984, -0.17916392, 0.051796213, 0.28135315, 0.07981063)
bone_name = "DEF_WINGS.R"
bone_idx = 49

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Skeleton3D/BoneAttachment3D" index="0"]
transform = Transform3D(-0.14090945, -0.2377729, 0.032325387, 0.23725528, -0.13243851, 0.060052857, -0.03592799, 0.057969455, 0.2697872, -0.094184875, 0.12763096, -0.024947777)
sprite_frames = SubResource("SpriteFrames_1pdba")
animation = &"wings"
autoplay = "wings"
frame_progress = 0.09179163

[node name="BoneAttachment3D2" type="BoneAttachment3D" parent="Skeleton3D" index="27"]
transform = Transform3D(-0.90615875, -0.41458818, 0.08362219, -2.3841858e-07, 0.19771811, 0.98025894, -0.4229374, 0.8882701, -0.17916414, -0.051796205, 0.28135315, 0.07981063)
bone_name = "DEF_WINGS.L"
bone_idx = 50

[node name="AnimatedSprite3D" type="AnimatedSprite3D" parent="Skeleton3D/BoneAttachment3D2" index="0"]
transform = Transform3D(0.15217485, 0.23010044, -0.036509212, 0.22545789, -0.15643352, -0.046191365, -0.058718786, -0.0043199323, -0.271974, 0.10598919, 0.098374695, -0.020983279)
sprite_frames = SubResource("SpriteFrames_1pdba")
animation = &"wings"
autoplay = "wings"
frame_progress = 0.05826593

[node name="AnimationTree" type="AnimationTree" parent="." index="3"]
tree_root = SubResource("AnimationNodeStateMachine_snc18")
anim_player = NodePath("../AnimationPlayer")
parameters/conditions/artillery = false
parameters/conditions/attack = false
parameters/conditions/idle = false

[node name="SoundEffectManager" type="Node3D" parent="." index="4"]
script = ExtResource("3_vgdol")
metadata/_custom_type_script = "uid://fxqs1lioec3e"

[node name="Death" parent="SoundEffectManager" index="0" instance=ExtResource("4_l08uq")]
stream = SubResource("AudioStreamRandomizer_vgdol")
volume_db = -4.0

[node name="Artillery" parent="SoundEffectManager" index="1" instance=ExtResource("4_l08uq")]
stream = SubResource("AudioStreamRandomizer_snc18")
volume_db = -6.0

[node name="Shoot" parent="SoundEffectManager" index="2" instance=ExtResource("4_l08uq")]
stream = SubResource("AudioStreamRandomizer_k7ve1")
volume_db = -6.0
