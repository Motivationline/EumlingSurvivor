[gd_scene load_steps=13 format=3 uid="uid://cjqhostf8f0eq"]

[ext_resource type="PackedScene" uid="uid://dg5ap3nmd46eb" path="res://game/projectiles/base_projectile.tscn" id="1_dr7tk"]
[ext_resource type="Script" uid="uid://c1k2fcc6tpf3l" path="res://strategies/projectile_movement/speed.gd" id="2_uj31g"]
[ext_resource type="Script" uid="uid://d3ikpji4y1ipa" path="res://strategies/projectile_movement/rotation.gd" id="3_7pjyq"]
[ext_resource type="Script" uid="uid://cpx1eq3gu268a" path="res://strategies/event/spawn_entities.gd" id="4_fxuck"]
[ext_resource type="Script" uid="uid://1e84fd3xrrff" path="res://game/spawner/entity_spawner.gd" id="5_rvme0"]
[ext_resource type="PackedScene" uid="uid://bov1hcmo0on0h" path="res://game/vfx/firehit/fire_hit.tscn" id="6_xr6i1"]
[ext_resource type="Script" uid="uid://dpcp1l71hgqcc" path="res://game/spawner/strategies/rotation/random_rotation.gd" id="7_7gghi"]
[ext_resource type="PackedScene" uid="uid://ck0cf6ywrf78g" path="res://game/vfx/fire_hull/vfx_realistic.tscn" id="8_eg8k5"]

[sub_resource type="Curve" id="Curve_1mi8i"]
_limits = [-16.0, 16.0, 0.0, 1.0]
_data = [Vector2(0, 8), 0.0, -155.363, 0, 0]
point_count = 1

[sub_resource type="Curve" id="Curve_67cxf"]
_limits = [0.0, 45.0, 0.0, 1.0]
_data = [Vector2(0, 1.70577), 0.0, -1.70577, 0, 1]
point_count = 1

[sub_resource type="Resource" id="Resource_3ldc7"]
script = ExtResource("7_7gghi")
max_negative = -180.0
max_positive = 180.0
metadata/_custom_type_script = "uid://dpcp1l71hgqcc"

[sub_resource type="SphereShape3D" id="SphereShape3D_jogt0"]
radius = 0.126734

[node name="curve_left_projectile" node_paths=PackedStringArray("movement", "on_end_of_life") instance=ExtResource("1_dr7tk")]
collision_mask = 0
lifetime = 1.0
movement = [NodePath("MovementStrategies/SpeedProjectileMovementStrategy"), NodePath("MovementStrategies/RotationProjectileMovementStrategy")]
on_end_of_life = [NodePath("EventStrategies/OnEndOfLife/SpawnEntitiesEventStrategy")]

[node name="SpeedProjectileMovementStrategy" type="Node" parent="MovementStrategies" index="0"]
script = ExtResource("2_uj31g")
normalize_to_lifetime = false
speed = SubResource("Curve_1mi8i")
metadata/_custom_type_script = "uid://c1k2fcc6tpf3l"

[node name="RotationProjectileMovementStrategy" type="Node" parent="MovementStrategies" index="1"]
script = ExtResource("3_7pjyq")
mode = "add"
rotation = SubResource("Curve_67cxf")
metadata/_custom_type_script = "uid://d3ikpji4y1ipa"

[node name="SpawnEntitiesEventStrategy" type="Node" parent="EventStrategies/OnEndOfLife" index="0"]
script = ExtResource("4_fxuck")
metadata/_custom_type_script = "uid://cpx1eq3gu268a"

[node name="EntitySpawner" type="Node3D" parent="EventStrategies/OnEndOfLife/SpawnEntitiesEventStrategy" index="0"]
script = ExtResource("5_rvme0")
entity_to_spawn = ExtResource("6_xr6i1")
rotation_strategy = SubResource("Resource_3ldc7")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="2"]
shape = SubResource("SphereShape3D_jogt0")

[node name="vfx_projectile" parent="." index="3" instance=ExtResource("8_eg8k5")]
transform = Transform3D(-4.37114e-08, 0, 1, 0, 1, 0, -1, 0, -4.37114e-08, 2.07039e-09, 0, 0.047365)
