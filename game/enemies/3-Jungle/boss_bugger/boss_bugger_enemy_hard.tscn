[gd_scene format=3 uid="uid://cjkfwsnjoqk6y"]

[ext_resource type="PackedScene" uid="uid://cu1ucgco815t4" path="res://game/enemies/base_enemy.tscn" id="1_c86we"]
[ext_resource type="Script" uid="uid://d08yjq57yklyp" path="res://game/enemies/3-jungle/boss_bugger/boss_bugger_enemy.gd" id="2_61ew2"]
[ext_resource type="Script" uid="uid://bfy1ig4u2piu5" path="res://state_machine/enemy/choose_state_based_on_cost.gd" id="3_p8oh0"]
[ext_resource type="Script" uid="uid://dmskxets4soyo" path="res://state_machine/enemy/move_towards_player.gd" id="4_bopa3"]
[ext_resource type="Script" uid="uid://c1j50itv0hwo2" path="res://state_machine/enemy/spawn_entities.gd" id="5_7gnyv"]
[ext_resource type="Script" uid="uid://1e84fd3xrrff" path="res://game/spawner/entity_spawner.gd" id="6_0irvu"]
[ext_resource type="PackedScene" uid="uid://b1084wmkhn2en" path="res://game/aoes/boss_bugger_aoe_attack/boss_bugger_aoe.tscn" id="7_irclo"]
[ext_resource type="Script" uid="uid://cd6d7qdolbapn" path="res://state_machine/enemy/wait_for_time_x.gd" id="8_5mb7f"]
[ext_resource type="Script" uid="uid://cxy0hm7s41xp3" path="res://state_machine/enemy/look_at_player.gd" id="9_bhsd8"]
[ext_resource type="PackedScene" uid="uid://ycoy5ujvbc8r" path="res://game/enemies/3-jungle/bomb_berry_poison/bomb_berry_poison.tscn" id="9_bopa3"]
[ext_resource type="PackedScene" uid="uid://deylycbs8xlp0" path="res://game/enemies/3-jungle/sniper/sniper_projectile_enemy.tscn" id="10_5vwgk"]
[ext_resource type="Script" uid="uid://yd5ytc70xwp6" path="res://game/spawner/strategies/target/target_direction.gd" id="11_movh1"]
[ext_resource type="Script" uid="uid://pv70hoylokg6" path="res://game/spawner/strategies/rotation/circle.gd" id="12_5klh4"]
[ext_resource type="Script" uid="uid://dc33apjfi7s6v" path="res://strategies/event/enemy/play_sound.gd" id="13_hg0gv"]
[ext_resource type="Script" uid="uid://dpcp1l71hgqcc" path="res://game/spawner/strategies/rotation/random_rotation.gd" id="13_p8oh0"]
[ext_resource type="Script" uid="uid://b327yqkxkrliq" path="res://game/hurtbox/hurtbox.gd" id="14_4d6kv"]
[ext_resource type="PackedScene" uid="uid://cmvibss2u7woe" path="res://game/hitbox/hitbox.tscn" id="15_85lgk"]
[ext_resource type="PackedScene" uid="uid://cvbt5bpffucle" path="res://assets/characters/enemies/bossbugger/boss_bugger_prefab.tscn" id="16_ekuuj"]
[ext_resource type="Shader" uid="uid://5x2ftmf5e728" path="res://game/shared/lquid_shader/liquid_shader.gdshader" id="17_61ew2"]

[sub_resource type="Resource" id="Resource_p8oh0"]
script = ExtResource("11_movh1")
metadata/_custom_type_script = "uid://yd5ytc70xwp6"

[sub_resource type="Resource" id="Resource_bopa3"]
script = ExtResource("13_p8oh0")
max_negative = -20.0
max_positive = 20.0
metadata/_custom_type_script = "uid://dpcp1l71hgqcc"

[sub_resource type="Resource" id="Resource_csjgc"]
script = ExtResource("11_movh1")
metadata/_custom_type_script = "uid://yd5ytc70xwp6"

[sub_resource type="Resource" id="Resource_7gnyv"]
script = ExtResource("13_p8oh0")
max_negative = -20.0
max_positive = 20.0
metadata/_custom_type_script = "uid://dpcp1l71hgqcc"

[sub_resource type="Resource" id="Resource_c2xk5"]
script = ExtResource("11_movh1")
metadata/_custom_type_script = "uid://yd5ytc70xwp6"

[sub_resource type="Resource" id="Resource_0irvu"]
script = ExtResource("13_p8oh0")
max_negative = -20.0
max_positive = 20.0
metadata/_custom_type_script = "uid://dpcp1l71hgqcc"

[sub_resource type="Resource" id="Resource_4qoll"]
script = ExtResource("11_movh1")
metadata/_custom_type_script = "uid://yd5ytc70xwp6"

[sub_resource type="Resource" id="Resource_ha4n7"]
script = ExtResource("12_5klh4")
metadata/_custom_type_script = "uid://pv70hoylokg6"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_fngux"]
radius = 0.38916016
height = 1.8376465

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_v2l6f"]
radius = 0.82714844
height = 2.6362305

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_0vw1d"]
radius = 0.2553711
height = 2.4926758

[sub_resource type="Gradient" id="Gradient_vkxpk"]
colors = PackedColorArray(0.78431374, 0.05490196, 0.13333334, 1, 0.7437567, 0, 0.10945506, 1)

[sub_resource type="GradientTexture1D" id="GradientTexture1D_djlvw"]
gradient = SubResource("Gradient_vkxpk")

[sub_resource type="ShaderMaterial" id="ShaderMaterial_p8oh0"]
render_priority = 0
shader = ExtResource("17_61ew2")
shader_parameter/liquid_height = 0.0
shader_parameter/liquid_surface_color = Color(0.79607844, 0.08235294, 0.08627451, 1)
shader_parameter/liquid_rim_gradient = SubResource("GradientTexture1D_djlvw")
shader_parameter/rim_emission_intensity = 0.814000038665
shader_parameter/rim_exponent = 3.0
shader_parameter/emission_intensity = 0.1
shader_parameter/liquid_surface_gradient_size = 0.1
shader_parameter/wobble = Vector2(-0.09724543, -0.023309367)

[node name="BossBugger" node_paths=PackedStringArray("hurtbox", "node_with_animation_tree", "on_death") instance=ExtResource("1_c86we")]
collision_layer = 64
collision_mask = 65
script = ExtResource("2_61ew2")
MAX_FILL = 18.0
health = 2000.0
speed = 1.1
hurtbox = NodePath("HurtBox")
node_with_animation_tree = NodePath("Visuals/BossBugger")
on_death = [NodePath("Eventlisteners/PlaySoundEventStrategy")]

[node name="Healthbar3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 3.4826612, 0)
hide_when_full_after = 100.0
hide_initially = false

[node name="HealthbarEnemy3D" parent="." index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 2.75, -0.5)

[node name="StateMachine" parent="." index="2" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("ChooseStateBasedOnCost")

[node name="ChooseStateBasedOnCost" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("fallback", "states")]
script = ExtResource("3_p8oh0")
fallback = NodePath("../Recharge/SpawnEntitiesState")
selection = "RANDOM"
states = [NodePath("../MeleeAttack/MoveTowardsPlayerState"), NodePath("../TripleShot/LookAtPlayerState1"), NodePath("../BigBomba/AimForBig")]
animation_trigger = Dictionary[String, Variant]({
"parameters/Salve/request": 3
})

[node name="MeleeAttack" type="Node" parent="StateMachine" index="1"]

[node name="MoveTowardsPlayerState" type="Node" parent="StateMachine/MeleeAttack" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("4_bopa3")
wait_time = 0.0
stop_distance = 2.0
speed_override = 3.5
speed_override_active = true
next_state = NodePath("../SpawnEntitiesState")
resource_cost = 3.0
metadata/_custom_type_script = "uid://dmskxets4soyo"

[node name="SpawnEntitiesState" type="Node" parent="StateMachine/MeleeAttack" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.5
end_delay = 0.4
next_state = NodePath("../../ChooseStateBasedOnCost")
resource_cost = 3.0
animation_trigger = Dictionary[String, Variant]({
"parameters/hit/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/MeleeAttack/SpawnEntitiesState" index="0"]
script = ExtResource("6_0irvu")
spawn_local = true
entity_to_spawn = ExtResource("7_irclo")
amount_of_spawns = 0
time_between_entities = 1.0
offset_distance = 0.5
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="Recharge" type="Node" parent="StateMachine" index="2"]

[node name="SpawnEntitiesState" type="Node" parent="StateMachine/Recharge" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
next_state = NodePath("../WaitForTimeXState")
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/Recharge/SpawnEntitiesState" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("9_bopa3")
offset_distance = 1.0
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="WaitForTimeXState" type="Node" parent="StateMachine/Recharge" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("8_5mb7f")
wait_time = 1.6
next_state = NodePath("../../ChooseStateBasedOnCost")
resource_cost = -18.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Suck/request": 1
})
metadata/_custom_type_script = "uid://cd6d7qdolbapn"

[node name="TripleShot" type="Node" parent="StateMachine" index="3"]

[node name="LookAtPlayerState1" type="Node" parent="StateMachine/TripleShot" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("9_bhsd8")
wait_time = 0.15
rotation_speed = 20.0
speed_override = 0.0
speed_override_active = true
next_state = NodePath("../Initial Shot")
resource_cost = 3.0
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="Initial Shot" type="Node" parent="StateMachine/TripleShot" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.5
next_state = NodePath("../LookAtPlayerState2")
resource_cost = 1.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Salve/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/TripleShot/Initial Shot" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("10_5vwgk")
amount_of_spawns = 3
offset_distance = 1.6
target_strategy = SubResource("Resource_p8oh0")
rotation_strategy = SubResource("Resource_bopa3")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="LookAtPlayerState2" type="Node" parent="StateMachine/TripleShot" index="2" node_paths=PackedStringArray("next_state")]
script = ExtResource("9_bhsd8")
wait_time = 0.15
rotation_speed = 20.0
speed_override = 0.0
speed_override_active = true
next_state = NodePath("../SpawnEntitiesState3")
animation_trigger = Dictionary[String, Variant]({
"parameters/Salve/request": 3
})
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="SpawnEntitiesState3" type="Node" parent="StateMachine/TripleShot" index="3" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.15
next_state = NodePath("../LookAtPlayerState3")
resource_cost = 1.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Salve/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/TripleShot/SpawnEntitiesState3" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("10_5vwgk")
amount_of_spawns = 3
offset_distance = 1.6
target_strategy = SubResource("Resource_csjgc")
rotation_strategy = SubResource("Resource_7gnyv")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="LookAtPlayerState3" type="Node" parent="StateMachine/TripleShot" index="4" node_paths=PackedStringArray("next_state")]
script = ExtResource("9_bhsd8")
wait_time = 0.15
rotation_speed = 20.0
speed_override = 0.0
speed_override_active = true
next_state = NodePath("../SpawnEntitiesState4")
animation_trigger = Dictionary[String, Variant]({
"parameters/Salve/request": 3
})
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="SpawnEntitiesState4" type="Node" parent="StateMachine/TripleShot" index="5" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.15
next_state = NodePath("../../ChooseStateBasedOnCost")
resource_cost = 1.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Salve/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/TripleShot/SpawnEntitiesState4" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("10_5vwgk")
amount_of_spawns = 3
offset_distance = 1.6
target_strategy = SubResource("Resource_c2xk5")
rotation_strategy = SubResource("Resource_0irvu")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="BigBomba" type="Node" parent="StateMachine" index="4"]

[node name="AimForBig" type="Node" parent="StateMachine/BigBomba" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("9_bhsd8")
wait_time = 0.15
rotation_speed = 20.0
speed_override = 0.0
speed_override_active = true
next_state = NodePath("../Booom")
resource_cost = 6.0
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="Booom" type="Node" parent="StateMachine/BigBomba" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.5
next_state = NodePath("../AimForBig2")
resource_cost = 2.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Boom/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/BigBomba/Booom" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("10_5vwgk")
amount_of_spawns = 20
offset_distance = 0.6
target_strategy = SubResource("Resource_4qoll")
rotation_strategy = SubResource("Resource_ha4n7")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="AimForBig2" type="Node" parent="StateMachine/BigBomba" index="2" node_paths=PackedStringArray("next_state")]
script = ExtResource("9_bhsd8")
wait_time = 0.15
rotation_speed = 20.0
speed_override = 0.0
speed_override_active = true
next_state = NodePath("../Booom2")
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="Booom2" type="Node" parent="StateMachine/BigBomba" index="3" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.5
next_state = NodePath("../AimForBig3")
resource_cost = 2.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Boom/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/BigBomba/Booom2" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("10_5vwgk")
amount_of_spawns = 20
offset_distance = 0.6
target_strategy = SubResource("Resource_4qoll")
rotation_strategy = SubResource("Resource_ha4n7")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="AimForBig3" type="Node" parent="StateMachine/BigBomba" index="4" node_paths=PackedStringArray("next_state")]
script = ExtResource("9_bhsd8")
wait_time = 0.15
rotation_speed = 20.0
speed_override = 0.0
speed_override_active = true
next_state = NodePath("../Booom3")
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="Booom3" type="Node" parent="StateMachine/BigBomba" index="5" node_paths=PackedStringArray("next_state")]
script = ExtResource("5_7gnyv")
start_delay = 0.5
next_state = NodePath("../../ChooseStateBasedOnCost")
resource_cost = 2.0
animation_trigger = Dictionary[String, Variant]({
"parameters/Boom/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/BigBomba/Booom3" index="0"]
script = ExtResource("6_0irvu")
entity_to_spawn = ExtResource("10_5vwgk")
amount_of_spawns = 20
offset_distance = 0.6
target_strategy = SubResource("Resource_4qoll")
rotation_strategy = SubResource("Resource_ha4n7")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="PlaySoundEventStrategy" type="Node" parent="Eventlisteners" index="0" node_paths=PackedStringArray("sound_manager")]
script = ExtResource("13_hg0gv")
sound_manager = NodePath("../../Visuals/BossBugger/SoundEffectManager")
sound_to_play = "Death"
needs_to_be_persistent = true

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="4"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6593018, 0)
shape = SubResource("CapsuleShape3D_fngux")
disabled = true

[node name="HurtBox" type="Area3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.6593018, 0)
collision_layer = 65
collision_mask = 5
script = ExtResource("14_4d6kv")
attached_to = 7
can_be_hit_by = 3
metadata/_custom_type_script = "uid://b327yqkxkrliq"

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, -0.31811523, 0)
shape = SubResource("CapsuleShape3D_v2l6f")

[node name="Hitbox" parent="." index="6" instance=ExtResource("15_85lgk")]
collision_layer = 32
collision_mask = 8
damage = 250.0
attached_to = 6
can_hit = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hitbox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 1.2463379, 0)
shape = SubResource("CapsuleShape3D_0vw1d")

[node name="BossBugger" parent="Visuals" index="0" instance=ExtResource("16_ekuuj")]

[node name="Skeleton3D" parent="Visuals/BossBugger/Armature_001" index="0"]
bones/0/position = Vector3(7.523164e-37, 1.4608527, -3.8756469e-22)
bones/0/rotation = Quaternion(0.9944974, 5.396582e-09, -4.5444136e-08, -0.10476166)
bones/1/scale = Vector3(0.97199136, 1.0585451, 0.97199136)
bones/5/rotation = Quaternion(-0.44218287, 5.38352e-09, 2.4096401e-08, 0.896925)
bones/6/rotation = Quaternion(-0.09892902, 3.1639191e-09, 3.16929e-10, 0.99509454)
bones/7/rotation = Quaternion(-0.10263399, -4.7649703e-15, 1.944407e-15, 0.99471927)
bones/7/scale = Vector3(1.3401756, 1.0154135, 1.3285314)
bones/8/rotation = Quaternion(-0.09892903, 2.0956688e-15, 9.1902965e-15, 0.99509454)
bones/9/rotation = Quaternion(-0.3117248, 2.4590116e-15, -4.9296152e-14, 0.95017254)
bones/10/rotation = Quaternion(-0.3117248, -1.4787462e-14, 2.0133376e-15, 0.9501724)
bones/11/rotation = Quaternion(-0.3117252, -4.190538e-15, -2.982047e-14, 0.9501723)
bones/12/rotation = Quaternion(-0.31172544, -2.2255842e-14, 7.4320944e-08, 0.95017225)
bones/17/rotation = Quaternion(0.5463989, -0.00023818816, 0.00023943002, 0.83752507)
bones/19/rotation = Quaternion(-0.42760935, 0.46148136, -0.5701551, -0.52830714)
bones/22/rotation = Quaternion(-0.32482886, 0.538796, -0.66567653, -0.40132275)
bones/25/rotation = Quaternion(0.5463989, 0.00023826546, -0.00023947898, 0.83752507)
bones/27/rotation = Quaternion(0.19261292, -0.64460623, 0.3497947, 0.6519408)
bones/31/rotation = Quaternion(0.4276093, 0.46148136, -0.5701552, 0.52830714)
bones/34/rotation = Quaternion(0.3248288, 0.538796, -0.6656765, 0.40132275)

[node name="BoneAttachment3D" parent="Visuals/BossBugger/Armature_001/Skeleton3D" index="0"]
transform = Transform3D(0.97199136, -1.2831342e-09, 2.3186487e-07, 4.9466127e-08, 1.0353099, -0.2025342, -2.2652995e-07, 0.22056943, 0.9506561, 3.4823052e-12, 1.458043, -0.0005986046)

[node name="MeshInstance3D" parent="Visuals/BossBugger/Armature_001/Skeleton3D/BoneAttachment3D" index="0"]
material_override = SubResource("ShaderMaterial_p8oh0")

[node name="BoneAttachment3D2" parent="Visuals/BossBugger/Armature_001/Skeleton3D" index="2"]
transform = Transform3D(-0.07608376, -0.9971016, -5.268949e-07, -7.4505806e-08, -4.5076013e-07, 1, -0.9971016, 0.07608379, -1.4901161e-08, -0.24529767, 1.4611813, -0.001543232)

[node name="BoneAttachment3D3" parent="Visuals/BossBugger/Armature_001/Skeleton3D" index="3"]
transform = Transform3D(-0.46685272, -0.8843351, -3.1827858e-07, -4.4703484e-08, -2.7567148e-07, 1, -0.8843351, 0.4668527, 1.7881393e-07, -0.13967305, 1.3553915, 0.09933218)

[node name="BoneAttachment3D4" parent="Visuals/BossBugger/Armature_001/Skeleton3D" index="4"]
transform = Transform3D(-0.07608382, 0.99710166, 4.5658183e-07, 2.5331974e-07, -4.4703484e-07, 1.0000001, 0.99710155, 0.0760838, -1.937151e-07, 0.24529767, 1.4611813, -0.0015432319)

[node name="BoneAttachment3D5" parent="Visuals/BossBugger/Armature_001/Skeleton3D" index="5"]
transform = Transform3D(-0.46685255, 0.88433534, 3.671748e-07, 5.9604645e-08, -3.6507845e-07, 0.9999999, 0.8843351, 0.4668526, 1.6391277e-07, 0.13967305, 1.3553915, 0.09933219)

[editable path="Visuals/BossBugger"]
