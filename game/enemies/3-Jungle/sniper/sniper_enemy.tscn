[gd_scene load_steps=11 format=3 uid="uid://b865xrtojih3l"]

[ext_resource type="PackedScene" uid="uid://cu1ucgco815t4" path="res://game/enemies/base_enemy.tscn" id="1_jj26d"]
[ext_resource type="PackedScene" uid="uid://dtxcbfvali8ib" path="res://assets/characters/enemies/peacock/peacock_prefab.tscn" id="2_3n5vt"]
[ext_resource type="Script" uid="uid://cxy0hm7s41xp3" path="res://state_machine/enemy/look_at_player.gd" id="2_4ah3n"]
[ext_resource type="Script" uid="uid://c1j50itv0hwo2" path="res://state_machine/enemy/spawn_entities.gd" id="2_qcoba"]
[ext_resource type="Script" uid="uid://1e84fd3xrrff" path="res://game/spawner/entity_spawner.gd" id="3_4ah3n"]
[ext_resource type="PackedScene" uid="uid://deylycbs8xlp0" path="res://game/enemies/3-Jungle/sniper/sniper_projectile_enemy.tscn" id="4_3xlw0"]
[ext_resource type="Script" path="res://strategies/event/enemy/play_sound.gd" id="6_qd5e1"]
[ext_resource type="Script" uid="uid://b327yqkxkrliq" path="res://game/hurtbox/hurtbox.gd" id="6_yptkn"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_6lrmx"]
radius = 0.4165039
height = 0.8330078

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qcoba"]
radius = 0.26123047
height = 0.7426758

[node name="SniperEnemy" node_paths=PackedStringArray("hurtbox", "node_with_animation_tree", "on_death") instance=ExtResource("1_jj26d")]
health = 150.0
hurtbox = NodePath("HurtBox")
node_with_animation_tree = NodePath("Visuals/peacock")
on_death = [NodePath("Eventlisteners/PlaySoundEventStrategy")]

[node name="Healthbar3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.90527487, -0.07545662)

[node name="StateMachine" parent="." index="2" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("LookAtPlayerState")

[node name="LookAtPlayerState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_4ah3n")
next_state = NodePath("../SpawnEntitiesState")
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="SpawnEntitiesState" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_qcoba")
start_delay = 0.3
next_state = NodePath("../LookAtPlayerState")
animation_trigger = "attack"
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/SpawnEntitiesState" index="0"]
script = ExtResource("3_4ah3n")
entity_to_spawn = ExtResource("4_3xlw0")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="PlaySoundEventStrategy" type="Node" parent="Eventlisteners" index="0" node_paths=PackedStringArray("sound_manager")]
script = ExtResource("6_qd5e1")
sound_manager = NodePath("../../Visuals/peacock/SoundEffectManager")
sound_to_play = "Death"
needs_to_be_persistent = true

[node name="HurtBox" type="Area3D" parent="." index="4"]
collision_layer = 64
collision_mask = 5
script = ExtResource("6_yptkn")
attached_to = 7
can_be_hit_by = 3
metadata/_custom_type_script = "uid://b327yqkxkrliq"

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.27905273, 0)
shape = SubResource("CapsuleShape3D_6lrmx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.3322754, 0)
shape = SubResource("CapsuleShape3D_qcoba")
debug_color = Color(0.6433014, 0.4436161, 0.73155004, 0.41960785)

[node name="peacock" parent="Visuals" index="0" instance=ExtResource("2_3n5vt")]

[node name="Skeleton3D" parent="Visuals/peacock/Armature" index="0"]
bones/1/position = Vector3(-8.446488e-18, -0.038039595, 0.0307887)
bones/2/position = Vector3(-3.8324964e-16, 0.06357177, 0.1264812)
bones/3/position = Vector3(-2.4690443e-15, 0.12873562, 0.23803422)
bones/3/rotation = Quaternion(0.7443895, -0.09670097, 0.06596066, 0.65740585)
bones/4/position = Vector3(-0.0149412425, 0.12116174, 0.3006004)
bones/4/rotation = Quaternion(0.5925215, -0.10823882, 0.044555765, 0.79700536)
bones/5/position = Vector3(-0.027895877, 0.14026418, 0.36136872)
bones/5/rotation = Quaternion(0.11124039, -0.11596182, -0.01593302, 0.98687613)
bones/6/position = Vector3(-0.0281685, 0.20282169, 0.35848248)
bones/6/rotation = Quaternion(0.70776707, 3.0879733e-08, 3.093748e-08, 0.706446)
bones/7/position = Vector3(-0.028232817, 0.26224703, 0.35848588)
bones/7/rotation = Quaternion(0.0009341504, 5.1368885e-16, -1.1102229e-16, 0.99999964)
bones/8/position = Vector3(-0.0281685, 0.27888206, 0.3223698)
bones/8/rotation = Quaternion(0.0009341504, 5.1362696e-16, -4.4502036e-17, 0.99999964)
bones/9/position = Vector3(-0.0281685, 0.13710819, 0.42950487)
bones/9/rotation = Quaternion(-1.1765657e-07, 0.16087385, 0.986975, -1.91777e-08)
bones/10/position = Vector3(-0.0281685, 0.082772925, 0.44781417)
bones/10/rotation = Quaternion(3.8875e-08, 0.12206609, 0.99252206, 3.3004778e-08)
bones/11/position = Vector3(-0.028168503, 0.023999074, 0.46260968)
bones/11/rotation = Quaternion(1.2802334e-08, -0.10787322, 0.9941647, 1.8334934e-07)
bones/12/position = Vector3(0.016587678, 0.21299355, 0.41729861)
bones/12/rotation = Quaternion(0.09852336, -0.11115838, -0.74417686, 0.6512586)
bones/13/position = Vector3(0.05746007, 0.20753776, 0.4299827)
bones/13/rotation = Quaternion(-0.035575606, 0.060306948, -0.8531204, 0.5169943)
bones/14/position = Vector3(-0.07292467, 0.21299353, 0.41729861)
bones/14/rotation = Quaternion(0.09852335, 0.11115841, 0.74417686, 0.65125865)
bones/15/position = Vector3(-0.11379707, 0.20753774, 0.4299827)
bones/15/rotation = Quaternion(-0.035575613, -0.060306948, 0.8531204, 0.5169943)
bones/16/position = Vector3(-0.09516589, 0.21593311, 0.3725401)
bones/16/rotation = Quaternion(0.000660535, -0.000660535, 0.70710653, 0.70710653)
bones/17/position = Vector3(-0.09369986, 0.21593311, 0.37169692)
bones/17/rotation = Quaternion(0.00066052924, -0.00066052924, 0.70710653, 0.70710653)
bones/18/position = Vector3(0.038828894, 0.2159331, 0.3725401)
bones/18/rotation = Quaternion(0.0006605643, 0.0006605643, -0.70710653, 0.70710653)
bones/19/position = Vector3(0.03736286, 0.2159331, 0.37169692)
bones/19/rotation = Quaternion(0.00066052796, 0.00066052796, -0.70710653, 0.70710653)
bones/20/position = Vector3(-0.09263891, 0.21593311, 0.37066004)
bones/20/rotation = Quaternion(0.0006605352, -0.0006605352, 0.70710653, 0.70710653)
bones/21/position = Vector3(0.03630191, 0.2159331, 0.37066004)
bones/21/rotation = Quaternion(0.0006605641, 0.0006605641, -0.70710653, 0.70710653)
bones/22/position = Vector3(0.0841214, 0.1630015, 0.23263398)
bones/23/position = Vector3(0.13383691, 0.07346279, 0.1601586)
bones/24/position = Vector3(0.14529794, -0.09570289, 0.16978909)
bones/25/position = Vector3(0.118225455, 0.0012086183, 0.20071612)
bones/26/position = Vector3(-2.9747848e-15, 0.17154375, 0.20505276)
bones/27/position = Vector3(1.8127822e-15, 0.19484654, 0.11861046)
bones/28/position = Vector3(1.0715182e-15, -0.011440365, 0.14949107)
bones/29/position = Vector3(-3.583036e-15, -0.13655877, 0.18015867)
bones/30/position = Vector3(0.027694607, -0.31635344, 0.32697815)
bones/30/rotation = Quaternion(0.009475451, 0.51160604, 0.8590827, -0.01210755)
bones/31/position = Vector3(0.037589032, -0.47295985, 0.61604726)
bones/31/rotation = Quaternion(0.020426007, 0.39862138, 0.9166038, -0.022831284)
bones/32/position = Vector3(0.056849666, -0.69672847, 0.8556903)
bones/32/rotation = Quaternion(0.031021375, 0.27910107, 0.9591877, -0.033154402)
bones/33/position = Vector3(0.08344391, -0.97346795, 1.0309868)
bones/33/rotation = Quaternion(0.04111041, 0.15502566, 0.9861204, -0.04293637)
bones/34/position = Vector3(0.11546236, -1.2851226, 1.1303108)
bones/34/rotation = Quaternion(0.05052839, 0.028420333, 0.9969621, -0.052017458)
bones/35/position = Vector3(-3.5596704e-15, -0.1365588, 0.18015863)
bones/39/rotation = Quaternion(0.010896528, 0.6118708, 0.7908076, -0.01089647)
bones/40/rotation = Quaternion(-0.12649596, -0.0019981358, 0.015664922, 0.9918415)
bones/42/rotation = Quaternion(0.010820944, 0.61171234, 0.79093224, -0.010820979)
bones/43/rotation = Quaternion(-0.12649593, -0.0019981798, 0.015664915, 0.9918415)
bones/45/rotation = Quaternion(0.010896522, 0.61187094, 0.7908075, -0.010896561)
bones/46/rotation = Quaternion(-0.12649596, -0.0019981756, 0.015664913, 0.9918415)
bones/48/rotation = Quaternion(0.010896538, 0.6118708, 0.7908076, -0.010896581)
bones/49/rotation = Quaternion(-0.126496, -0.0019981856, 0.015664918, 0.9918415)
bones/51/rotation = Quaternion(0.01089201, 0.6118683, 0.79080975, -0.010892042)
bones/52/rotation = Quaternion(-0.12649594, -0.0019981826, 0.015664916, 0.9918415)
bones/55/rotation = Quaternion(-0.12649596, -0.0019981354, 0.015664924, 0.9918415)
bones/57/position = Vector3(-0.0281685, 0.20282167, 0.35848248)
bones/57/rotation = Quaternion(-3.3087232e-24, -0.00011601229, 1, 3.8375387e-28)
bones/77/position = Vector3(2.3268563e-17, 0.05482435, 0.124890774)
bones/79/rotation = Quaternion(0.3183505, -0.051033143, 0.105344646, 0.9407184)
bones/80/rotation = Quaternion(-0.20658705, 8.47824e-08, 3.5733727e-08, 0.97842824)
bones/81/rotation = Quaternion(-0.5029775, -7.092409e-08, 1.0848679e-07, 0.8642996)
bones/101/position = Vector3(-0.08412141, 0.1630015, 0.23263398)
bones/102/position = Vector3(-0.13383691, 0.073462784, 0.16015859)
bones/103/position = Vector3(-0.14529794, -0.0957029, 0.16978908)
bones/104/position = Vector3(-0.118225425, 0.0012086332, 0.20071612)

[editable path="Visuals/peacock"]
