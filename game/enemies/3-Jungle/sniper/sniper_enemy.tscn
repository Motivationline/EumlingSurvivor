[gd_scene load_steps=11 format=3 uid="uid://b865xrtojih3l"]

[ext_resource type="PackedScene" uid="uid://cu1ucgco815t4" path="res://game/enemies/base_enemy.tscn" id="1_jj26d"]
[ext_resource type="PackedScene" uid="uid://dtxcbfvali8ib" path="res://assets/characters/enemies/peacock/peacock_prefab.tscn" id="2_3n5vt"]
[ext_resource type="Script" uid="uid://cxy0hm7s41xp3" path="res://state_machine/enemy/look_at_player.gd" id="2_4ah3n"]
[ext_resource type="Script" uid="uid://c1j50itv0hwo2" path="res://state_machine/enemy/spawn_entities.gd" id="2_qcoba"]
[ext_resource type="Script" uid="uid://1e84fd3xrrff" path="res://game/spawner/entity_spawner.gd" id="3_4ah3n"]
[ext_resource type="PackedScene" uid="uid://deylycbs8xlp0" path="res://game/enemies/3-Jungle/sniper/sniper_projectile_enemy.tscn" id="4_3xlw0"]
[ext_resource type="Script" uid="uid://dc33apjfi7s6v" path="res://strategies/event/enemy/play_sound.gd" id="6_qd5e1"]
[ext_resource type="Script" uid="uid://b327yqkxkrliq" path="res://game/hurtbox/hurtbox.gd" id="6_yptkn"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_6lrmx"]
radius = 0.4165039
height = 0.8330078

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qcoba"]
radius = 0.26123047
height = 0.7426758

[node name="SniperEnemy" node_paths=PackedStringArray("hurtbox", "node_with_animation_tree", "on_death") instance=ExtResource("1_jj26d")]
health = 150.0
hurtbox = NodePath("HurtBox")
node_with_animation_tree = NodePath("Visuals/peacock")
on_death = [NodePath("Eventlisteners/PlaySoundEventStrategy")]

[node name="Healthbar3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.90527487, -0.07545662)

[node name="StateMachine" parent="." index="2" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("LookAtPlayerState")

[node name="LookAtPlayerState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_4ah3n")
next_state = NodePath("../SpawnEntitiesState")
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="SpawnEntitiesState" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_qcoba")
start_delay = 0.3
next_state = NodePath("../LookAtPlayerState")
animation_trigger = Dictionary[String, Variant]({
"parameters/shoot/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/SpawnEntitiesState" index="0"]
script = ExtResource("3_4ah3n")
entity_to_spawn = ExtResource("4_3xlw0")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="PlaySoundEventStrategy" type="Node" parent="Eventlisteners" index="0" node_paths=PackedStringArray("sound_manager")]
script = ExtResource("6_qd5e1")
sound_manager = NodePath("../../Visuals/peacock/SoundEffectManager")
sound_to_play = "Death"
needs_to_be_persistent = true

[node name="HurtBox" type="Area3D" parent="." index="4"]
collision_layer = 64
collision_mask = 5
script = ExtResource("6_yptkn")
attached_to = 7
can_be_hit_by = 3
metadata/_custom_type_script = "uid://b327yqkxkrliq"

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.27905273, 0)
shape = SubResource("CapsuleShape3D_6lrmx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.3322754, 0)
shape = SubResource("CapsuleShape3D_qcoba")
debug_color = Color(0.6433014, 0.4436161, 0.73155004, 0.41960785)

[node name="peacock" parent="Visuals" index="0" instance=ExtResource("2_3n5vt")]

[node name="Skeleton3D" parent="Visuals/peacock/Armature" index="0"]
bones/1/position = Vector3(-8.4464885e-18, -0.0380396, 0.026782079)
bones/2/position = Vector3(-3.969855e-16, 0.06357177, 0.12247458)
bones/3/position = Vector3(-1.0287393e-15, 0.12873562, 0.2340276)
bones/3/rotation = Quaternion(0.73814434, 9.462088e-10, -9.744827e-08, 0.6746429)
bones/4/position = Vector3(8.606738e-09, 0.122924864, 0.29853624)
bones/4/rotation = Quaternion(0.5875999, 4.447996e-08, -3.954008e-09, 0.8091517)
bones/5/position = Vector3(1.24206325e-08, 0.14304052, 0.3603494)
bones/5/rotation = Quaternion(0.11448438, -7.969406e-08, 6.2010386e-08, 0.9934251)
bones/6/position = Vector3(-8.326647e-11, 0.20620188, 0.35848248)
bones/6/rotation = Quaternion(0.70819193, 3.0861113e-08, 3.095605e-08, 0.70601994)
bones/7/rotation = Quaternion(0.001535793, 5.134787e-16, -1.110222e-16, 0.9999988)
bones/8/rotation = Quaternion(0.001535793, 5.1337677e-16, -4.4502e-17, 0.9999988)
bones/9/rotation = Quaternion(-1.17668094e-07, 0.16028005, 0.98707163, -1.9106903e-08)
bones/10/rotation = Quaternion(3.8894857e-08, 0.1214689, 0.9925953, 3.298139e-08)
bones/11/rotation = Quaternion(1.2912636e-08, -0.10847133, 0.9940996, 1.8334161e-07)
bones/12/rotation = Quaternion(0.09891517, -0.11071062, -0.7442436, 0.6511992)
bones/15/rotation = Quaternion(-0.03526455, -0.06082021, 0.8530839, 0.5170157)
bones/16/rotation = Quaternion(0.0010859605, -0.0010859605, 0.70710593, 0.70710593)
bones/17/rotation = Quaternion(0.0010859545, -0.0010859545, 0.70710593, 0.70710593)
bones/18/rotation = Quaternion(0.0010859899, 0.0010859899, -0.70710593, 0.70710593)
bones/19/rotation = Quaternion(0.0010859533, 0.0010859533, -0.70710593, 0.70710593)
bones/20/rotation = Quaternion(0.0010859607, -0.0010859607, 0.70710593, 0.70710593)
bones/21/rotation = Quaternion(0.0010859896, 0.0010859896, -0.70710593, 0.70710593)
bones/22/position = Vector3(0.0841214, 0.1630015, 0.22862735)
bones/23/position = Vector3(0.13383691, 0.07346279, 0.15615198)
bones/24/position = Vector3(0.14529794, -0.09570289, 0.16578247)
bones/25/position = Vector3(0.118225455, 0.0012086183, 0.1967095)
bones/26/position = Vector3(-3.2273721e-15, 0.17154375, 0.20104614)
bones/27/position = Vector3(1.7621867e-15, 0.19484654, 0.114603825)
bones/28/position = Vector3(1.4485507e-15, -0.011440373, 0.14548445)
bones/29/position = Vector3(-3.583036e-15, -0.13655877, 0.17615204)
bones/30/position = Vector3(0.027694607, -0.31635344, 0.3229715)
bones/30/rotation = Quaternion(-0.0017032546, 0.5138501, 0.8578756, 0.0021764692)
bones/31/position = Vector3(0.025892, -0.47145447, 0.61243755)
bones/31/rotation = Quaternion(-0.003659233, 0.40345204, 0.9149844, 0.0041007595)
bones/32/position = Vector3(0.022455625, -0.69311327, 0.85508084)
bones/32/rotation = Quaternion(-0.005558416, 0.286817, 0.9579508, 0.0059615145)
bones/33/position = Vector3(0.017655304, -0.96767765, 1.0356569)
bones/33/rotation = Quaternion(-0.007371408, 0.16574708, 0.98611045, 0.007729822)
bones/34/position = Vector3(0.011845158, -1.2782371, 1.143043)
bones/34/rotation = Quaternion(-0.009070094, 0.042113144, 0.9990277, 0.009378271)
bones/35/position = Vector3(-3.5596704e-15, -0.1365588, 0.176152)
bones/39/rotation = Quaternion(-0.0019436945, 0.61377186, 0.7894788, 0.0019437503)
bones/40/rotation = Quaternion(-0.12405124, 0.00035161665, -0.0028077336, 0.9922718)
bones/42/rotation = Quaternion(-0.0019542302, 0.61392385, 0.78936046, 0.0019541925)
bones/43/rotation = Quaternion(-0.12405127, 0.0003515734, -0.0028077392, 0.9922718)
bones/45/rotation = Quaternion(-0.0019542351, 0.61392385, 0.78936046, 0.0019541974)
bones/46/rotation = Quaternion(-0.12405122, 0.00035157325, -0.002807739, 0.9922718)
bones/48/rotation = Quaternion(-0.001954234, 0.61392385, 0.78936046, 0.0019541972)
bones/49/rotation = Quaternion(-0.12405124, 0.00035157337, -0.0028077392, 0.9922718)
bones/51/rotation = Quaternion(-0.0019542389, 0.61392367, 0.7893605, 0.0019542035)
bones/52/rotation = Quaternion(-0.12405126, 0.00035157273, -0.00280774, 0.9922718)
bones/55/rotation = Quaternion(-0.12405125, 0.00035161647, -0.002807734, 0.9922718)
bones/57/rotation = Quaternion(-2.9681325e-24, -0.0015358347, 0.9999988, 5.0815623e-27)
bones/77/position = Vector3(2.3268563e-17, 0.054824345, 0.12088416)
bones/79/rotation = Quaternion(0.30435354, 2.4227488e-08, -1.07965356e-07, 0.95255923)
bones/80/rotation = Quaternion(-0.20024769, 8.3594415e-08, 4.377466e-08, 0.9797454)
bones/81/rotation = Quaternion(-0.49139398, -7.174047e-08, 1.05969875e-07, 0.8709374)
bones/101/position = Vector3(-0.08412141, 0.1630015, 0.22862735)
bones/102/position = Vector3(-0.13383691, 0.073462784, 0.15615197)
bones/103/position = Vector3(-0.14529794, -0.0957029, 0.16578245)
bones/104/position = Vector3(-0.118225425, 0.0012086332, 0.1967095)

[editable path="Visuals/peacock"]
