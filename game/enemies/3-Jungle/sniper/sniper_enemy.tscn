[gd_scene load_steps=11 format=3 uid="uid://b865xrtojih3l"]

[ext_resource type="PackedScene" uid="uid://cu1ucgco815t4" path="res://game/enemies/base_enemy.tscn" id="1_jj26d"]
[ext_resource type="PackedScene" uid="uid://dtxcbfvali8ib" path="res://assets/characters/enemies/peacock/peacock_prefab.tscn" id="2_3n5vt"]
[ext_resource type="Script" uid="uid://cxy0hm7s41xp3" path="res://state_machine/enemy/look_at_player.gd" id="2_4ah3n"]
[ext_resource type="Script" uid="uid://c1j50itv0hwo2" path="res://state_machine/enemy/spawn_entities.gd" id="2_qcoba"]
[ext_resource type="Script" uid="uid://1e84fd3xrrff" path="res://game/spawner/entity_spawner.gd" id="3_4ah3n"]
[ext_resource type="PackedScene" uid="uid://deylycbs8xlp0" path="res://game/enemies/3-Jungle/sniper/sniper_projectile_enemy.tscn" id="4_3xlw0"]
[ext_resource type="Script" uid="uid://dc33apjfi7s6v" path="res://strategies/event/enemy/play_sound.gd" id="6_qd5e1"]
[ext_resource type="Script" uid="uid://b327yqkxkrliq" path="res://game/hurtbox/hurtbox.gd" id="6_yptkn"]

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_6lrmx"]
radius = 0.4165039
height = 0.8330078

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_qcoba"]
radius = 0.26123047
height = 0.7426758

[node name="SniperEnemy" node_paths=PackedStringArray("hurtbox", "node_with_animation_tree", "on_death") instance=ExtResource("1_jj26d")]
health = 150.0
hurtbox = NodePath("HurtBox")
node_with_animation_tree = NodePath("Visuals/peacock")
on_death = [NodePath("Eventlisteners/PlaySoundEventStrategy")]

[node name="Healthbar3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.90527487, -0.07545662)

[node name="StateMachine" parent="." index="2" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("LookAtPlayerState")

[node name="LookAtPlayerState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_4ah3n")
next_state = NodePath("../SpawnEntitiesState")
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="SpawnEntitiesState" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_qcoba")
start_delay = 0.3
next_state = NodePath("../LookAtPlayerState")
animation_trigger = Dictionary[String, Variant]({
"parameters/shoot/request": 1
})
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/SpawnEntitiesState" index="0"]
script = ExtResource("3_4ah3n")
entity_to_spawn = ExtResource("4_3xlw0")
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="PlaySoundEventStrategy" type="Node" parent="Eventlisteners" index="0" node_paths=PackedStringArray("sound_manager")]
script = ExtResource("6_qd5e1")
sound_manager = NodePath("../../Visuals/peacock/SoundEffectManager")
sound_to_play = "Death"
needs_to_be_persistent = true

[node name="HurtBox" type="Area3D" parent="." index="4"]
collision_layer = 64
collision_mask = 5
script = ExtResource("6_yptkn")
attached_to = 7
can_be_hit_by = 3
metadata/_custom_type_script = "uid://b327yqkxkrliq"

[node name="CollisionShape3D" type="CollisionShape3D" parent="HurtBox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.27905273, 0)
shape = SubResource("CapsuleShape3D_6lrmx")

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.3322754, 0)
shape = SubResource("CapsuleShape3D_qcoba")
debug_color = Color(0.6433014, 0.4436161, 0.73155004, 0.41960785)

[node name="peacock" parent="Visuals" index="0" instance=ExtResource("2_3n5vt")]

[node name="Skeleton3D" parent="Visuals/peacock/Armature" index="0"]
bones/0/position = Vector3(0, 0.039992757, 0.038039602)
bones/1/position = Vector3(8.34908e-17, 0.13568527, -0.063571766)
bones/2/position = Vector3(-1.0559849e-15, 0.24723831, -0.1287356)
bones/2/rotation = Quaternion(0.053867698, -7.2248035e-08, -7.607557e-08, 0.9985481)
bones/3/position = Vector3(9.336148e-09, 0.31163236, -0.121769205)
bones/3/rotation = Quaternion(-0.17378934, 2.7187959e-08, -3.6523303e-08, 0.9847829)
bones/4/position = Vector3(1.3398585e-08, 0.37270814, -0.14402199)
bones/4/rotation = Quaternion(-0.67680347, -5.5825207e-09, 1.1029776e-07, 0.7361638)
bones/5/position = Vector3(-7.8408874e-10, 0.3584825, -0.20620187)
bones/5/rotation = Quaternion(0.0015358136, 4.3711342e-08, 6.713213e-11, 0.9999988)
bones/6/position = Vector3(4.440892e-16, 0.3586651, -0.26564372)
bones/6/rotation = Quaternion(-0.70601994, 3.6320476e-16, -3.6320474e-16, 0.70819193)
bones/7/position = Vector3(4.619928e-16, 0.32260364, -0.28237277)
bones/7/rotation = Quaternion(-0.70601994, 4.101696e-16, -3.1609586e-16, 0.70819193)
bones/8/position = Vector3(0, 0.42930266, -0.14027049)
bones/8/rotation = Quaternion(-6.96933e-08, 0.81130004, 0.58463, -9.6714494e-08)
bones/9/position = Vector3(-4.0740493e-16, 0.44744503, -0.08587928)
bones/9/rotation = Quaternion(4.1814445e-09, 0.7877623, 0.6159794, 5.082421e-08)
bones/10/position = Vector3(-3.395559e-09, 0.46205986, -0.02706026)
bones/10/rotation = Quaternion(-1.2051144e-07, 0.62623376, 0.77963537, 1.3877265e-07)
bones/11/position = Vector3(0.04475618, 0.4173296, -0.21619302)
bones/11/rotation = Quaternion(-0.39052388, -0.60454386, -0.44797546, 0.53041095)
bones/12/position = Vector3(0.085628554, 0.4299968, -0.21069826)
bones/12/rotation = Quaternion(0.39052105, 0.5602151, 0.64622784, -0.34064946)
bones/13/position = Vector3(-0.04475618, 0.4173296, -0.21619302)
bones/13/rotation = Quaternion(-0.39052388, 0.60454386, 0.44797546, 0.53041095)
bones/14/position = Vector3(-0.085628554, 0.4299968, -0.21069826)
bones/14/rotation = Quaternion(-0.39052105, 0.5602151, 0.64622784, 0.34064946)
bones/15/position = Vector3(-0.066997394, 0.3725803, -0.21927002)
bones/15/rotation = Quaternion(0.49923152, -0.49923152, -0.50076735, -0.50076735)
bones/16/position = Vector3(-0.06553136, 0.37173712, -0.21927261)
bones/16/rotation = Quaternion(0.49923152, -0.49923152, -0.5007673, -0.5007673)
bones/17/position = Vector3(0.066997394, 0.3725803, -0.21927004)
bones/17/rotation = Quaternion(0.49923152, 0.49923152, 0.50076735, -0.50076735)
bones/18/position = Vector3(0.06553136, 0.37173712, -0.21927261)
bones/18/rotation = Quaternion(0.49923152, 0.49923152, 0.5007673, -0.5007673)
bones/19/position = Vector3(-0.06447041, 0.37070024, -0.21927579)
bones/19/rotation = Quaternion(0.49923152, -0.49923152, -0.50076735, -0.50076735)
bones/20/position = Vector3(0.06447041, 0.37070024, -0.2192758)
bones/20/rotation = Quaternion(0.49923152, 0.49923152, 0.50076735, -0.50076735)
bones/21/position = Vector3(0.08412139, 0.24183804, -0.16300146)
bones/22/position = Vector3(0.13383693, 0.1693627, -0.073462784)
bones/23/position = Vector3(0.14529793, 0.17899315, 0.09570292)
bones/24/position = Vector3(0.118225455, 0.20992018, -0.0012086034)
bones/25/position = Vector3(0, 0.21425682, -0.17154373)
bones/26/position = Vector3(1.9084076e-15, 0.12781453, -0.19484654)
bones/27/position = Vector3(5.10925e-18, 0.15869513, 0.011440381)
bones/28/position = Vector3(-3.552714e-15, 0.18936272, 0.13655879)
bones/29/position = Vector3(0.027694607, 0.33618218, 0.31635344)
bones/29/rotation = Quaternion(-0.02281309, 0.9651165, 0.26081052, 0.0027822205)
bones/30/position = Vector3(0.012744945, 0.6197967, 0.48177162)
bones/30/rotation = Quaternion(-0.045562774, 0.91749156, 0.39513138, 0.002127942)
bones/31/position = Vector3(-0.015285293, 0.8444676, 0.72000915)
bones/31/rotation = Quaternion(-0.06736291, 0.85075665, 0.5212229, 0.0014293789)
bones/32/position = Vector3(-0.05344194, 0.9915652, 1.0114219)
bones/32/rotation = Quaternion(-0.08775914, 0.76630175, 0.63645864, 0.0007010475)
bones/33/position = Vector3(-0.09793093, 1.0488904, 1.3319577)
bones/33/rotation = Quaternion(-0.10632637, 0.6658853, 0.7384385, -4.1894615e-05)
bones/34/position = Vector3(-0.084121406, 0.24183804, -0.16300146)
bones/35/position = Vector3(-0.13383693, 0.16936268, -0.07346277)
bones/36/position = Vector3(-0.14529793, 0.17899314, 0.09570293)
bones/37/position = Vector3(-0.118225425, 0.20992018, -0.0012086183)

[editable path="Visuals/peacock"]
