[gd_scene load_steps=15 format=3 uid="uid://drtoi8fygioae"]

[ext_resource type="PackedScene" uid="uid://cu1ucgco815t4" path="res://game/enemies/base_enemy.tscn" id="1_5rk5k"]
[ext_resource type="Script" uid="uid://dgi4gidx4vpsn" path="res://state_machine/enemy/move_random_nav_mesh.gd" id="2_eux68"]
[ext_resource type="PackedScene" uid="uid://cgtlnuch0nmwm" path="res://assets/characters/enemies/tortoise/tortoise_prefab.tscn" id="2_s8eqa"]
[ext_resource type="PackedScene" uid="uid://cmvibss2u7woe" path="res://game/hitbox/hitbox.tscn" id="4_c3oc6"]
[ext_resource type="Script" uid="uid://c1j50itv0hwo2" path="res://state_machine/enemy/spawn_entities.gd" id="4_eq0kn"]
[ext_resource type="PackedScene" uid="uid://cii4n42sv8t0e" path="res://game/hurtbox/hurtbox.tscn" id="5_4kafm"]
[ext_resource type="PackedScene" uid="uid://c03op2rrwafaq" path="res://game/enemies/3-Jungle/tortoise/tortoise_projectile.tscn" id="5_eux68"]
[ext_resource type="Script" uid="uid://1e84fd3xrrff" path="res://game/spawner/entity_spawner.gd" id="5_lwqy1"]
[ext_resource type="Script" uid="uid://pv70hoylokg6" path="res://game/spawner/strategies/rotation/circle.gd" id="7_8vp05"]
[ext_resource type="Script" path="res://strategies/event/enemy/play_sound.gd" id="9_l76kt"]

[sub_resource type="Resource" id="Resource_84v5a"]
script = ExtResource("7_8vp05")
metadata/_custom_type_script = "uid://pv70hoylokg6"

[sub_resource type="CapsuleShape3D" id="CapsuleShape3D_4kafm"]
radius = 0.439081
height = 0.955451

[sub_resource type="SphereShape3D" id="SphereShape3D_a57xe"]
radius = 0.39281

[sub_resource type="SphereShape3D" id="SphereShape3D_fgitk"]
radius = 0.437599

[node name="TortoiseEnemy" node_paths=PackedStringArray("hitbox", "hurtbox", "node_with_animation_tree", "on_death") instance=ExtResource("1_5rk5k")]
collision_layer = 64
collision_mask = 65
health = 400.0
speed = 0.4
hitbox = NodePath("Hitbox")
hurtbox = NodePath("Hurtbox")
node_with_animation_tree = NodePath("Visuals/tortoise")
on_death = [NodePath("Eventlisteners/PlaySoundEventStrategy")]

[node name="Healthbar3D" parent="." index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.919, 0)

[node name="StateMachine" parent="." index="2" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("MoveRandomOnNavMeshState")

[node name="MoveRandomOnNavMeshState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_eux68")
wait_time = 0.0
max_distance = 2.5
next_state = NodePath("../SpawnEntitiesState")
animation_trigger = "walk"
metadata/_custom_type_script = "uid://dgi4gidx4vpsn"

[node name="SpawnEntitiesState" type="Node" parent="StateMachine" index="1" node_paths=PackedStringArray("next_state")]
script = ExtResource("4_eq0kn")
start_delay = 0.5
end_delay = 0.8
next_state = NodePath("../MoveRandomOnNavMeshState")
animation_trigger = "shake"
metadata/_custom_type_script = "uid://c1j50itv0hwo2"

[node name="EntitySpawner" type="Node3D" parent="StateMachine/SpawnEntitiesState" index="0"]
script = ExtResource("5_lwqy1")
entity_to_spawn = ExtResource("5_eux68")
amount_of_spawns = 5
time_between_entities = 0.25
offset_distance = 0.2
rotation_strategy = SubResource("Resource_84v5a")
time_between_bursts = 0.2
amount_of_bursts = 2
metadata/_custom_type_script = "uid://1e84fd3xrrff"

[node name="Hitbox" parent="." index="3" instance=ExtResource("4_c3oc6")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.35191, 0)
collision_layer = 32
collision_mask = 8
damage = 50.0
attached_to = 6
can_hit = 4

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hitbox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.066589, 0)
shape = SubResource("CapsuleShape3D_4kafm")

[node name="Hurtbox" parent="." index="4" instance=ExtResource("5_4kafm")]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.334121, 0)
collision_layer = 64
collision_mask = 4
attached_to = 7
can_be_hit_by = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox" index="0"]
shape = SubResource("SphereShape3D_a57xe")
debug_color = Color(0.883413, 0.262783, 0.530975, 0.42)

[node name="CollisionShape3D" type="CollisionShape3D" parent="." index="5"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.388744, 0)
shape = SubResource("SphereShape3D_fgitk")

[node name="PlaySoundEventStrategy" type="Node" parent="Eventlisteners" index="0" node_paths=PackedStringArray("sound_manager")]
script = ExtResource("9_l76kt")
sound_manager = NodePath("../../Visuals/tortoise/SoundEffectManager")
sound_to_play = "Death"
needs_to_be_persistent = true

[node name="tortoise" parent="Visuals" index="0" instance=ExtResource("2_s8eqa")]

[node name="Skeleton3D" parent="Visuals/tortoise/Armature_Tortoise" index="0"]
bones/25/position = Vector3(6.543659e-25, 5.8940053e-09, 0.09888502)
bones/26/position = Vector3(6.718702e-24, 3.8164956e-08, 0.2653017)
bones/27/position = Vector3(0.13752593, 0.31151024, 0.26647472)
bones/27/rotation = Quaternion(0.07810812, 1.2372712e-07, 0.002713528, 0.9969412)
bones/28/position = Vector3(-3.67249e-05, 0.4580406, 0.3063743)
bones/29/position = Vector3(0.1595301, 0.42650938, 0.3389581)
bones/30/position = Vector3(0.29653853, 0.3322509, 0.34173864)
bones/31/position = Vector3(-4.421814e-15, -0.2928202, 0.24569513)
bones/32/position = Vector3(8.308856e-15, -0.37576702, 0.22843292)
bones/33/position = Vector3(1.6849967e-14, -0.4587138, 0.21117075)
bones/34/position = Vector3(0.2847773, 0.22281703, 0.25788325)
bones/34/rotation = Quaternion(-0.4803198, 0.2045349, -0.31839362, 0.7912547)
bones/35/position = Vector3(0.32734862, 0.26933086, 0.13456888)
bones/35/rotation = Quaternion(-0.122747615, -0.3364314, 0.87279165, 0.33163482)
bones/38/position = Vector3(0.27231178, -0.22873242, 0.25788334)
bones/38/rotation = Quaternion(-0.48947722, 0.18176942, -0.274891, 0.80734557)
bones/39/position = Vector3(0.3091414, -0.17752959, 0.13457829)
bones/39/rotation = Quaternion(-0.09753881, -0.3449789, 0.89540637, 0.26405147)
bones/42/position = Vector3(-0.13752593, 0.31151024, 0.26647472)
bones/42/rotation = Quaternion(0.07810811, -1.14138324e-07, -0.002713529, 0.9969412)
bones/43/position = Vector3(-0.1595301, 0.42650938, 0.3389581)
bones/44/position = Vector3(-0.29653853, 0.3322509, 0.34173864)
bones/45/position = Vector3(9.504948e-24, 6.326122e-08, 0.6863471)
bones/46/position = Vector3(0.013346331, 0.10696813, 0.69304806)
bones/46/rotation = Quaternion(0.09828034, 0.00052733964, 0.005339611, 0.99514437)
bones/47/position = Vector3(0.012519642, 0.18400104, 0.70841426)
bones/47/rotation = Quaternion(-0.058055494, 0.0018626864, -0.014312828, 0.998209)
bones/48/position = Vector3(0.015431037, 0.2859319, 0.69650966)
bones/48/rotation = Quaternion(-0.35294577, -0.0140832355, 0.032835796, 0.9349614)
bones/49/position = Vector3(0.010388984, 0.35929084, 0.631753)
bones/49/rotation = Quaternion(-0.5187283, -0.026832355, 0.039877594, 0.85358703)
bones/50/position = Vector3(0.005320898, 0.4170566, 0.5199526)
bones/50/rotation = Quaternion(-0.6048576, -0.06670724, 0.07871545, 0.789621)
bones/51/position = Vector3(0.10350019, 0.030827045, 0.69036996)
bones/51/rotation = Quaternion(0.0854302, -0.048590023, -0.49200147, 0.86502904)
bones/52/position = Vector3(0.1697133, 0.07020448, 0.7057363)
bones/52/rotation = Quaternion(-0.04937968, 0.030586788, -0.510561, 0.85787743)
bones/53/position = Vector3(0.2593374, 0.11884486, 0.69383156)
bones/53/rotation = Quaternion(-0.31288144, 0.16393407, -0.43813947, 0.8265982)
bones/54/position = Vector3(0.32025704, 0.16002437, 0.62907493)
bones/54/rotation = Quaternion(-0.46290615, 0.23562023, -0.39142752, 0.7595957)
bones/55/position = Vector3(0.36767668, 0.19340016, 0.51727444)
bones/55/rotation = Quaternion(-0.5574431, 0.24404861, -0.32584915, 0.7235468)
bones/56/position = Vector3(0.057404034, -0.08162277, 0.6816048)
bones/56/rotation = Quaternion(-0.045759503, 0.08697918, 0.8807133, -0.46334112)
bones/57/position = Vector3(0.12089065, -0.12526001, 0.6969711)
bones/57/rotation = Quaternion(0.025101157, -0.052381605, 0.89248985, -0.44731203)
bones/58/position = Vector3(0.20259279, -0.18627754, 0.68506646)
bones/58/rotation = Quaternion(0.1751502, -0.3067434, 0.81463057, -0.46000874)
bones/59/position = Vector3(0.26549903, -0.22435321, 0.6203098)
bones/59/rotation = Quaternion(0.2628637, -0.44799757, 0.73916733, -0.4287572)
bones/60/position = Vector3(0.3156653, -0.2534376, 0.5085093)
bones/60/rotation = Quaternion(0.3379442, -0.5060596, 0.6645002, -0.43374777)
bones/61/position = Vector3(-0.03631856, -0.053826578, 0.6715519)
bones/61/rotation = Quaternion(0.059362106, 0.16741008, 0.9275141, 0.3288886)
bones/62/position = Vector3(-0.08268336, -0.11098408, 0.69901454)
bones/62/rotation = Quaternion(0.006803364, 0.021002296, 0.9353036, 0.35315698)
bones/63/position = Vector3(-0.15047632, -0.18794973, 0.7035413)
bones/63/rotation = Quaternion(-0.08524036, -0.26401168, 0.912874, 0.29948816)
bones/64/position = Vector3(-0.19964159, -0.25469565, 0.6513097)
bones/64/rotation = Quaternion(-0.13731211, -0.42814675, 0.84956557, 0.27581546)
bones/65/position = Vector3(-0.24385639, -0.31530404, 0.55014837)
bones/65/rotation = Quaternion(-0.15393922, -0.52144885, 0.8035805, 0.2421825)
bones/66/position = Vector3(-0.05135756, 0.03191454, 0.67952883)
bones/66/rotation = Quaternion(0.10916388, 0.07547205, 0.56424695, 0.8148697)
bones/67/position = Vector3(-0.122300334, 0.05857743, 0.70019495)
bones/67/rotation = Quaternion(-0.019911028, -0.011761, 0.550593, 0.83445346)
bones/68/position = Vector3(-0.21658985, 0.09891465, 0.6954538)
bones/68/rotation = Quaternion(-0.25941917, -0.18910061, 0.5537256, 0.76832986)
bones/69/position = Vector3(-0.29034787, 0.12362358, 0.6358754)
bones/69/rotation = Quaternion(-0.3958246, -0.28877297, 0.5100707, 0.70693773)
bones/70/position = Vector3(-0.3523841, 0.14456828, 0.5282894)
bones/70/rotation = Quaternion(-0.46131614, -0.3541664, 0.4908489, 0.6487071)
bones/71/position = Vector3(-0.28477737, 0.222817, 0.25788325)
bones/71/rotation = Quaternion(-0.4803202, -0.20453522, 0.3183934, 0.7912545)
bones/72/position = Vector3(-0.32734856, 0.2693307, 0.13456881)
bones/72/rotation = Quaternion(0.1227476, -0.3364317, 0.87279165, -0.3316348)
bones/75/position = Vector3(-0.27231178, -0.22873242, 0.25788334)
bones/75/rotation = Quaternion(-0.48947757, -0.18176949, 0.27489087, 0.80734533)
bones/76/position = Vector3(-0.3091413, -0.17752959, 0.13457824)
bones/76/rotation = Quaternion(0.09753885, -0.34497893, 0.89540637, -0.26405147)
bones/79/position = Vector3(0.003076606, 0.37708825, 0.24706234)
bones/80/position = Vector3(0.030316489, 0.39280522, 0.25165072)
bones/81/position = Vector3(0.06656807, 0.41185123, 0.24469796)
bones/82/position = Vector3(0.09021839, 0.4274844, 0.2169902)
bones/83/position = Vector3(0.107516035, 0.43954253, 0.17060305)
bones/84/position = Vector3(0.36522165, 0.05871909, 0.24888946)
bones/85/position = Vector3(0.3815762, 0.086073056, 0.2693057)
bones/86/position = Vector3(0.4084351, 0.12563844, 0.28195444)
bones/87/position = Vector3(0.43116894, 0.16370124, 0.26573506)
bones/88/position = Vector3(0.45542553, 0.20230651, 0.22569132)
bones/89/position = Vector3(0.33915424, 0.04624821, 0.22861274)
bones/90/position = Vector3(0.3726436, 0.020950204, 0.24813773)
bones/91/position = Vector3(0.41796657, -0.0183861, 0.2557784)
bones/92/position = Vector3(0.4576638, -0.050552618, 0.22888917)
bones/93/position = Vector3(0.4940869, -0.08304074, 0.17298128)
bones/94/position = Vector3(0.30403218, 0.04196699, 0.2601322)
bones/95/position = Vector3(0.3610152, 0.044963405, 0.25149637)
bones/96/position = Vector3(0.42860165, 0.044173673, 0.21802598)
bones/97/position = Vector3(0.4630911, 0.0456551, 0.15486023)
bones/98/position = Vector3(0.4751835, 0.044188056, 0.063139014)
bones/99/position = Vector3(-0.36522165, 0.05871907, 0.24888942)
bones/100/position = Vector3(-0.3815762, 0.086073026, 0.26930568)
bones/101/position = Vector3(-0.4084351, 0.12563841, 0.2819544)
bones/102/position = Vector3(-0.43116894, 0.1637012, 0.26573503)
bones/103/position = Vector3(-0.45542553, 0.20230646, 0.22569129)
bones/104/position = Vector3(-0.33915424, 0.046248212, 0.22861274)
bones/105/position = Vector3(-0.37264356, 0.02095024, 0.2481377)
bones/106/position = Vector3(-0.4179665, -0.01838608, 0.2557784)
bones/107/position = Vector3(-0.45766377, -0.05055261, 0.22888912)
bones/108/position = Vector3(-0.49408686, -0.08304076, 0.17298123)
bones/109/position = Vector3(-0.30403218, 0.04196699, 0.2601322)
bones/110/position = Vector3(-0.3610152, 0.044963405, 0.25149637)
bones/111/position = Vector3(-0.42860165, 0.044173673, 0.21802598)
bones/112/position = Vector3(-0.4630911, 0.0456551, 0.15486023)
bones/113/position = Vector3(-0.47518346, 0.04418806, 0.06313899)
bones/114/position = Vector3(-0.0030766109, 0.37708825, 0.24706234)
bones/115/position = Vector3(-0.030316493, 0.39280522, 0.25165072)
bones/116/position = Vector3(-0.066568084, 0.41185123, 0.24469796)
bones/117/position = Vector3(-0.090218425, 0.4274844, 0.2169902)
bones/118/position = Vector3(-0.10751607, 0.43954253, 0.17060304)
bones/119/position = Vector3(1.2526322e-14, -0.2928202, 0.2456951)
bones/125/position = Vector3(2.1123693e-18, 0.27481496, -0.08475455)
bones/133/rotation = Quaternion(-0.6341787, 0.0041485606, 0.0034027896, 0.77316797)
bones/140/rotation = Quaternion(-0.55125964, -0.3822559, -0.31353924, 0.6720762)
bones/147/rotation = Quaternion(0.29527453, 0.6842619, 0.56125486, -0.35998848)
bones/154/rotation = Quaternion(-0.19058384, 0.7742284, 0.5374747, 0.2745347)
bones/161/rotation = Quaternion(-0.49904355, 0.4524144, 0.34556663, 0.65334564)
bones/168/position = Vector3(-2.1123695e-18, -1.8466921e-25, -0.018576069)
bones/170/rotation = Quaternion(-0.6497131, 0.0019188655, 0.0019186869, 0.76017463)
bones/171/rotation = Quaternion(-0.6497131, -0.0019188116, -0.0019186535, 0.76017463)
bones/230/rotation = Quaternion(-0.48947716, 0.1817694, -0.27489093, 0.80734557)
bones/231/rotation = Quaternion(0.017422514, 0.79160726, -0.608899, 0.047922116)
bones/233/rotation = Quaternion(-0.48031974, 0.20453496, -0.31839374, 0.79125464)
bones/234/rotation = Quaternion(0.009227785, 0.7923349, -0.6094901, 0.025337193)
bones/236/rotation = Quaternion(-0.48947755, -0.18176948, 0.274891, 0.8073454)
bones/237/rotation = Quaternion(-0.017422542, 0.79160756, -0.6088987, -0.047922082)
bones/239/rotation = Quaternion(-0.48032016, -0.20453513, 0.3183933, 0.7912544)
bones/240/rotation = Quaternion(-0.009227768, 0.7923355, -0.60948944, -0.025337204)

[editable path="Visuals/tortoise"]
