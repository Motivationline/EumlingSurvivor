[gd_scene load_steps=12 format=3 uid="uid://qjw03pnxap48"]

[ext_resource type="PackedScene" uid="uid://cu1ucgco815t4" path="res://game/enemies/base_enemy.tscn" id="1_ranus"]
[ext_resource type="Script" uid="uid://cxy0hm7s41xp3" path="res://state_machine/enemy/look_at_player.gd" id="2_of4hj"]
[ext_resource type="Script" uid="uid://dafjuq1vey0x6" path="res://strategies/event/countdown.gd" id="3_jb4rr"]
[ext_resource type="Script" uid="uid://coqjh4l5f0121" path="res://strategies/event/remove.gd" id="4_xsrw6"]
[ext_resource type="PackedScene" uid="uid://cii4n42sv8t0e" path="res://game/hurtbox/hurtbox.tscn" id="5_of4hj"]

[sub_resource type="BoxMesh" id="BoxMesh_77255"]

[sub_resource type="PrismMesh" id="PrismMesh_201uu"]

[sub_resource type="Animation" id="Animation_0hu0l"]
resource_name = "1"

[sub_resource type="Animation" id="Animation_melpq"]
resource_name = "2"

[sub_resource type="AnimationLibrary" id="AnimationLibrary_qom8o"]
_data = {
&"1": SubResource("Animation_0hu0l"),
&"2": SubResource("Animation_melpq")
}

[sub_resource type="BoxShape3D" id="BoxShape3D_jb4rr"]

[node name="BaseEnemy" node_paths=PackedStringArray("hurtbox", "on_hurt") instance=ExtResource("1_ranus")]
hurtbox = NodePath("Hurtbox")
on_hurt = [NodePath("Eventlisteners/CountdownEventStrategy")]

[node name="StateMachine" parent="." index="1" node_paths=PackedStringArray("initial_state")]
initial_state = NodePath("LookAtPlayerState")

[node name="LookAtPlayerState" type="Node" parent="StateMachine" index="0" node_paths=PackedStringArray("next_state")]
script = ExtResource("2_of4hj")
next_state = NodePath(".")
metadata/_custom_type_script = "uid://cxy0hm7s41xp3"

[node name="CountdownEventStrategy" type="Node" parent="Eventlisteners" index="0" node_paths=PackedStringArray("event")]
script = ExtResource("3_jb4rr")
count = 5
event = NodePath("../RemoveEventStrategy")
once = true
metadata/_custom_type_script = "uid://dafjuq1vey0x6"

[node name="RemoveEventStrategy" type="Node" parent="Eventlisteners" index="1"]
script = ExtResource("4_xsrw6")
metadata/_custom_type_script = "uid://coqjh4l5f0121"

[node name="1" type="MeshInstance3D" parent="Visuals" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.51740384, 0)
mesh = SubResource("BoxMesh_77255")

[node name="2" type="MeshInstance3D" parent="Visuals" index="1"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.51740384, 0)
visible = false
mesh = SubResource("PrismMesh_201uu")

[node name="AnimationPlayer" type="AnimationPlayer" parent="." index="4"]
libraries = {
&"": SubResource("AnimationLibrary_qom8o")
}

[node name="Hurtbox" parent="." index="5" instance=ExtResource("5_of4hj")]
collision_layer = 64
collision_mask = 4
attached_to = 7
can_be_hit_by = 3

[node name="CollisionShape3D" type="CollisionShape3D" parent="Hurtbox" index="0"]
transform = Transform3D(1, 0, 0, 0, 1, 0, 0, 0, 1, 0, 0.5258845, 0)
shape = SubResource("BoxShape3D_jb4rr")
